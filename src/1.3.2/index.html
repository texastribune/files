<html>
    <head>
        <link rel="stylesheet" type="text/css" href="./css/browser.css">
        <link rel="stylesheet" type="text/css" href="./css/terminal.css">
        <link rel="stylesheet" type="text/css" href="./css/desktop.css">
    </head>

    <body id="body" class="desktop">
        <div class="icon" data-name="Browser" data-icon="folderIcon" data-command="browser"></div>
        <div class="icon" data-name="Terminal" data-icon="folderIcon" data-command="terminal"></div>
        <script type="module">
            import setupFileSystem from "./index.js";
            import * as icons from "./js/ui/icons.js";

            function createIcon(element){
              element.innerHTML = icons[element.dataset.icon];
              let name = document.createElement('p');
              name.innerText = element.dataset.name;
              element.appendChild(name);
              element.onclick = (event) => {
                event.preventDefault();
                window.__fileSystem.exec(element.dataset.command);
              };
            }

            setupFileSystem()
                .then((fileSystem) => {
                    window.__fileSystem = fileSystem;

                    for (let element of document.querySelectorAll('.icon')){
                      createIcon(element);
                    }
                });
        </script>
    </body>
</html>
