<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
let units = ['KB', 'MB', 'GB', 'TB'];

export function convertBytesToReadable(numBytes){
  let repr = null;
  let i = units.length;
  while (!repr &amp;&amp; i > 0) {
    let divisor = Math.pow(10, i * 3);
    let result = numBytes / divisor;
    let decimals = result > 10 ? 0 : 1;
    if (result > 1 || i === 0) {
      let unit = units[i - 1];
      repr = `${result.toFixed(decimals)} ${unit}`;
    }
    i--;
  }
  return repr || `${numBytes} bytes`;
}

export function compareStrings(string1, string2){
  return string1.localeCompare(string2);
}

export function compareNumbers(number1, number2){
  return number1 - number2;
}

export function compareDateStrings(dateString1, dateString2){
  return new Date(dateString1) - new Date(dateString2);
}


/**
 * Convert a file containing text data into a string.
 * @async
 * @param {File|Blob} file - File object containing text.
 * @returns {string} - The text contained in the file.
 */
export async function parseTextFile(file){
  return await new Promise((resolve, reject) => {
    let fileReader = new FileReader();
    fileReader.onload = () => {
      resolve(fileReader.result);
    };
    fileReader.onerror = () => {
      reject(fileReader.error)
    };
    fileReader.readAsText(file);
  });
}

/**
 * Convert a file containing JSON encoded data into a Javascript Object or Array.
 * @async
 * @param {File|Blob} file - File object containing text.
 * @returns {Object|Array} - A Javascript Object or Array.
 */
export async function parseJsonFile(file){
  let text = await parseTextFile(file);
  try {
    return JSON.parse(text);
  } catch (e) {
    throw new Error(`Error reading json file: ${e}.`)
  }
}

/**
 * Convert a file containing text data into a string.
 * @async
 * @param {File|Blob} file - File object containing text.
 * @returns {string} - Data url for file.
 */
export async function fileToDataUrl(file){
  return await new Promise((resolve, reject) => {
    let fileReader = new FileReader();
    fileReader.onload = () => {
      resolve(fileReader.result);
    };
    fileReader.onerror = () => {
      reject(fileReader.error)
    };
    fileReader.readAsDataURL(file);
  });
}

/**
 * Convert a dataUrl into a Blob.
 * @async
 * @param {string} dataUrl - Data url.
 * @returns {Blob} file - Blob object with data from dataUrl.
 */
export function dataUrlToBlob(dataUrl){
  let urlParts = dataUrl.split(':')[1].split(',');
  let encoding = urlParts[0];
  let data = urlParts[1];
  let encodingParts = encoding.split(';');
  let type = encodingParts[0] || 'text/plain';
  if (encodingParts[1] &amp;&amp; encodingParts[1] === 'base64'){
    let byteString = atob(data);
    data = new Uint8Array(new ArrayBuffer(byteString.length));
    for (let i = 0; i &lt; byteString.length; i++) {
      data[i] = byteString.charCodeAt(i);
    }
  }
  return new Blob([data], {type: type});
}


export function getOpt(...args){
  let index = 0;
  let kwargs = {};
  while (index &lt; args.length){
    if (args[index].startsWith('-')){
      let kwPair = args.splice(index, 2);
      let name = kwPair[0].substr(1);
      kwargs[name] = kwPair[1] || {};
    }
    index ++;
  }
  return [args, kwargs];
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AbstractFileStorage_AbstractFileStorage.html">AbstractFileStorage</a></li><li><a href="BaseFileSystem_BaseFileSystem.html">BaseFileSystem</a></li><li><a href="Column.html">Column</a></li><li><a href="DialogBrowser_DialogBrowser.html">DialogBrowser</a></li><li><a href="Element.html">Element</a></li><li><a href="FileAPIFileStorage_FileAPIFileStorage.html">FileAPIFileStorage</a></li><li><a href="FileBrowser_FileBrowser.html">FileBrowser</a></li><li><a href="FileObject_FileObject.html">FileObject</a></li><li><a href="Link_Link.html">Link</a></li><li><a href="LocalStorageFileStorage_LocalStorageFileStorage.html">LocalStorageFileStorage</a></li><li><a href="MemoryFileStorage_MemoryFileStorage.html">MemoryFileStorage</a></li><li><a href="PhotoshelterStorage_PhotoshelterStorage.html">PhotoshelterStorage</a></li><li><a href="Row.html">Row</a></li><li><a href="Table.html">Table</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-QuickStartTutorial.html">Quick Start</a></li><li><a href="tutorial-UserInterfaceTutorial.html">User Interface</a></li></ul><h3>Global</h3><ul><li><a href="global.html#CacheMixin">CacheMixin</a></li><li><a href="global.html#changeDirectory">changeDirectory</a></li><li><a href="global.html#data">data</a></li><li><a href="global.html#dataUrlToBlob">dataUrlToBlob</a></li><li><a href="global.html#DraggableMixin">DraggableMixin</a></li><li><a href="global.html#DroppableMixin">DroppableMixin</a></li><li><a href="global.html#exec">exec</a></li><li><a href="global.html#execFileObject">execFileObject</a></li><li><a href="global.html#ExecutableMixin">ExecutableMixin</a></li><li><a href="global.html#executablePath">executablePath</a></li><li><a href="global.html#fileToDataUrl">fileToDataUrl</a></li><li><a href="global.html#HiddenFileAPIMixin">HiddenFileAPIMixin</a></li><li><a href="global.html#HiddenReferenceLinkMixin">HiddenReferenceLinkMixin</a></li><li><a href="global.html#import">import</a></li><li><a href="global.html#importFromFileObject">importFromFileObject</a></li><li><a href="global.html#MountStorageMixin">MountStorageMixin</a></li><li><a href="global.html#parseConfigFile">parseConfigFile</a></li><li><a href="global.html#parseJsonFile">parseJsonFile</a></li><li><a href="global.html#parseTextFile">parseTextFile</a></li><li><a href="global.html#path">path</a></li><li><a href="global.html#refresh">refresh</a></li><li><a href="global.html#refreshAfter">refreshAfter</a></li><li><a href="global.html#StateMixin">StateMixin</a></li><li><a href="global.html#updateConfigFile">updateConfigFile</a></li><li><a href="global.html#waitFor">waitFor</a></li><li><a href="global.html#waitOn">waitOn</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Mon Jul 23 2018 11:26:09 GMT-0500 (CDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
