<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ui/history.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ui/history.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import {Element, DroppableMixin} from "./element.js";

/**
 * An element that represents the current location in a hierarchy.
 * @extends Element
 * @mixes DroppableMixin
 */
class BreadCrumb extends DroppableMixin(Element) {
  constructor(name, path) {
    super();
    this.name = name;
    this.path = path;
    this._link = null;
    this.className = 'crumb';

    // Callbacks
    this.onClick = null;
  }

  static get type(){
    return 'li';
  }

  get name(){
    return this._name || '';
  }

  get path(){
    return this._path || [];
  }

  set name(value){
    this._name = value;
    this._link.innerText = this._name;
  }

  set path(value){
    this._path = value;
  }

  render(){
    super.render();
    this._link = document.createElement('a');
    this._link.href = '#';
    this._link.onclick = (event) => {
      event.preventDefault();

      if (this.onClick){
        this.onClick(this.path);
      }
    };
    this._link.innerText = this.name;
    this.element.appendChild(this._link);
  }
}

export default class History extends Element {
  constructor(){
    super();

    // Set defaults
    this.startCharacter = '|';
    this.delimiter = '>';
    this.onDragOver = null;

    this.className = 'crumbs';
    this.delimiterClassName = 'delimiter';

    // Event callbacks
    this.onClick = null;
  }

  static get type(){
    return 'ul';
  }

  get path() {
    return this._path || [];
  }

  set delimiter(value){
    this._delimiter = value;
    this.render();
  }

  set path(value){
    this._path = value;
    this.render();
  }

  set startCharacter(value){
    this._startCharacter = value;
    this.render();
  }

  render(){
    super.render();

    this.element.appendChild(this.buildDelimiter(this._startCharacter));

    for (let i = 0; i &lt; this.path.length; i++) {
      let path = this.path.slice(0, i + 1);
      let name = this.path[i];
      if (i !== 0){
        this.element.appendChild(this.buildDelimiter(this._delimiter));
      }
      this.element.appendChild(this.buildCrumb(name, path));
    }
  }

  buildCrumb(name, path){
    let crumb = new BreadCrumb(name, path);
    crumb.addDragoverAction(() => {
      if (this.onDragOver){
        this.onDragOver(crumb.path);
      }
    });
    crumb.onClick = (path) => {
      if (this.onClick){
        this.onClick(path);
      }
    };
    return crumb.element;
  }

  buildDelimiter(text){
    let delimiter = document.createElement('li');
    delimiter.className = this.delimiterClassName;
    delimiter.innerText = text;
    return delimiter;
  }

  push(name){
    this._path.push(name);
    this.path = this._path;
  }

  pop(){
    let segment = this._path.pop();
    if (segment) {
      this.path = this._path;
    }
    return segment;  // url;
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AbstractFileStorage_AbstractFileStorage.html">AbstractFileStorage</a></li><li><a href="BaseFileSystem.html">BaseFileSystem</a></li><li><a href="BreadCrumb.html">BreadCrumb</a></li><li><a href="Column.html">Column</a></li><li><a href="DialogBrowser_DialogBrowser.html">DialogBrowser</a></li><li><a href="Element.html">Element</a></li><li><a href="FileAPIFileStorage.html">FileAPIFileStorage</a></li><li><a href="FileAPIFileStorage_AbstractFileStorage.html">AbstractFileStorage</a></li><li><a href="FileBrowser_FileBrowser.html">FileBrowser</a></li><li><a href="FileObject_FileObject.html">FileObject</a></li><li><a href="FileSystem.html">FileSystem</a></li><li><a href="Link_Link.html">Link</a></li><li><a href="LocalStorageFileStorage_LocalStorageFileStorage.html">LocalStorageFileStorage</a></li><li><a href="MemoryFileStorage_MemoryFileStorage.html">MemoryFileStorage</a></li><li><a href="PhotoshelterStorage_PhotoshelterStorage.html">PhotoshelterStorage</a></li><li><a href="Row.html">Row</a></li><li><a href="Table.html">Table</a></li></ul><h3>Mixins</h3><ul><li><a href="CacheMixin.html">CacheMixin</a></li><li><a href="DraggableMixin.html">DraggableMixin</a></li><li><a href="DroppableMixin.html">DroppableMixin</a></li><li><a href="ExecutableMixin.html">ExecutableMixin</a></li><li><a href="HiddenFileAPIMixin.html">HiddenFileAPIMixin</a></li><li><a href="HiddenReferenceLinkMixin.html">HiddenReferenceLinkMixin</a></li><li><a href="MountStorageMixin.html">MountStorageMixin</a></li><li><a href="StateMixin.html">StateMixin</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-DeveloperTutorial.html">Developers</a></li><li><a href="tutorial-UserInterfaceTutorial.html">User Interface</a></li></ul><h3>Global</h3><ul><li><a href="global.html#dataUrlToBlob">dataUrlToBlob</a></li><li><a href="global.html#fileToDataUrl">fileToDataUrl</a></li><li><a href="global.html#parseConfigFile">parseConfigFile</a></li><li><a href="global.html#parseJsonFile">parseJsonFile</a></li><li><a href="global.html#parseTextFile">parseTextFile</a></li><li><a href="global.html#updateConfigFile">updateConfigFile</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
