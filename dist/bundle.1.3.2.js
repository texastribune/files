var systemx=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);class o extends Error{constructor(e){super(e),this.name=this.constructor.name}}t.FileNotFoundError=o;t.FileAlreadyExistsError=class extends Error{constructor(e){super(e),this.name=this.constructor.name}};class s{constructor(){this.onChangeListeners=new Set}onChange(){for(let e of this.onChangeListeners)e(this)}addOnChangeListener(e){this.onChangeListeners.add(e)}removeOnChangeListener(e){this.onChangeListeners.delete(e)}get directory(){return!1}readText(){return r(this,void 0,void 0,function*(){let e=yield this.read();return i.parseTextArrayBuffer(e)})}readJSON(){return r(this,void 0,void 0,function*(){let e=yield this.read();return i.parseJsonArrayBuffer(e)})}copy(e){return r(this,void 0,void 0,function*(){yield e.addFile(yield this.read(),this.name,this.mimeType)})}move(e){return r(this,void 0,void 0,function*(){yield this.copy(e),yield this.delete()})}toString(){return this.name}}t.BasicFile=s;class a extends s{static get mimeType(){return"application/json"}get directory(){return!0}get mimeType(){return a.mimeType}get size(){return 0}get url(){return null}read(){return r(this,void 0,void 0,function*(){let e=[],t=yield this.getChildren();for(let n of t)e.push({id:n.id,name:n.name,directory:n.directory,url:n.url,icon:n.icon,size:n.size,mimeType:n.mimeType,lastModified:n.lastModified.toISOString(),created:n.created.toISOString(),extra:n.extra});let n=JSON.stringify(e);return i.stringToArrayBuffer(n)})}write(e){return r(this,void 0,void 0,function*(){throw new Error("Cannot write to a directory.")})}copy(e){return r(this,void 0,void 0,function*(){let t=yield e.addDirectory(this.name);for(let e of yield this.getChildren())yield e.copy(t)})}getFile(e){return r(this,void 0,void 0,function*(){if(0===e.length)return this;let t,n,r=e[e.length-1],i=e.slice(0,e.length-1),s=yield this.getFile(i);if(!(s instanceof a))throw new o(`File ${r} not found.`);for(t=yield s.getChildren();void 0===n;){let e=t.pop();if(void 0===e)throw new o(`File ${r} not found.`);e.name===r&&(n=e)}return n})}}t.Directory=a},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});let n=["KB","MB","GB","TB"];function r(t){if(void 0!==e)return e.from(t).toString();if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(new Uint8Array(t));{let e=new Uint8Array(t);return String.fromCharCode.apply(null,e)}}t.convertBytesToReadable=function(e){let t=null,r=n.length;for(;!t&&r>0;){let i=e/Math.pow(10,3*r),o=i>10?0:1;if(i>1||0===r){let e=n[r-1];t=`${i.toFixed(o)} ${e}`}r--}return t||`${e} bytes`},t.compareStrings=function(e,t){return e.localeCompare(t)},t.compareNumbers=function(e,t){return e-t},t.compareDateStrings=function(e,t){return new Date(e).getTime()-new Date(t).getTime()},t.parseTextArrayBuffer=r,t.parseJsonArrayBuffer=function(e){let t=r(e);return JSON.parse(t)},t.arrayBufferToDataUrl=function(e,t){let n="",r=new Uint8Array(e);for(let e of r)n+=String.fromCharCode(e);return`data:${t};base64,${btoa(n)}`},t.fileToArrayBuffer=function(e){return new Promise((t,n)=>{let r=new FileReader;r.onload=(()=>{let i=r.result;i instanceof ArrayBuffer?t(i):n("Could not read file "+e)}),r.onerror=(()=>{n(r.error)}),r.readAsArrayBuffer(e)})},t.stringToArrayBuffer=function(e){return Uint8Array.from([...e].map(e=>e.charCodeAt(0))).buffer},t.copyArrayBuffer=function(e){let t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t},t.getOpt=function(...e){let t=0,n={};for(;t<e.length;){if(e[t].startsWith("-")){let r=e.splice(t,2);n[r[0].substr(1)]=r[1]||""}t++}return[e,n]},t.createNode=function(e){let t=document.createElement("template");t.innerHTML=e;let n=t.content.firstChild;if(n instanceof Element)return n;throw Error("string could not be converted to HTML element")},t.getFirstInPath=function(e,t){for(let n of e.composedPath())if(n instanceof t)return n;return null}}).call(this,n(19).Buffer)},function(e,t,n){"use strict";n.r(t),n.d(t,"CustomElement",function(){return r});class r extends HTMLElement{constructor(){super(),this.connected=!1,null===this.shadowRoot&&this.attachShadow({mode:"open"})}static get observedAttributes(){return[]}get css(){return""}get template(){return null}connectedCallback(){this.connected=!0,this.refresh()}disconnectedCallback(){this.connected=!1}attributeChangedCallback(e,t,n){this.connected&&this.refresh()}removeShadowChildren(){if(this.shadowRoot)for(;this.shadowRoot.firstChild;)this.shadowRoot.removeChild(this.shadowRoot.firstChild)}removeChildren(e){if(void 0!==e){let t=Array.from(this.children);for(let n of t)n instanceof e&&this.removeChild(n)}else for(;this.firstChild;)this.removeChild(this.firstChild)}appendShadowChild(e){this.shadowRoot&&this.shadowRoot.appendChild(e)}appendShadowChildren(e){if(this.shadowRoot){let t=document.createDocumentFragment();for(let n of e)t.appendChild(n);this.shadowRoot.appendChild(t)}}appendChildren(e){let t=document.createDocumentFragment();for(let n of e)t.appendChild(n);this.appendChild(t)}flatChildren(e){return function t(n){let r=[];for(let i of n.children)(void 0===e||i instanceof e)&&r.push(i),r=r.concat(t(i));return r}(this)}refresh(){this.removeShadowChildren();let e={};for(let t of this.constructor.observedAttributes)e[t]=this.getAttribute(t);this.updateAttributes(e),this.shadowRoot&&this.render(this.shadowRoot)}render(e){let t=this.css;if(""!==t){let n=document.createElement("style");n.type="text/css",n.innerHTML=t.toString(),e.appendChild(n)}let n=this.template;if(n){if(!(n instanceof HTMLTemplateElement)){let e=document.createElement("template");e.innerHTML=n.toString(),n=e}let t=document.importNode(n.content,!0);e.appendChild(t)}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"Dialog",function(){return i}),n.d(t,"ConfirmDialog",function(){return o});var r=n(5);class i extends r.a{constructor(){super(),this.deleteButtonClass="delete",this.expandButtonClass="expand",this.nameClass="name",this.headerClass="header",this.containerClass="container",this.noPropagate=!0,this.opened=!1,this.onShow=null,this.onClose=null,this.onRemove=null,this.nameElement=document.createElement("span"),this.nameElement.className=this.nameClass,this.headerElement=document.createElement("div"),this.headerElement.className=this.headerClass,this.containerElement=document.createElement("div"),this.containerElement.className=this.containerClass;let e=document.createElement("button");e.type="button",e.className=this.expandButtonClass,e.onmousedown=(e=>{e.stopPropagation(),e.preventDefault()}),e.onclick=(e=>{e.stopPropagation(),e.preventDefault(),this.expanded=!0});let t=document.createElement("button");t.type="button",t.className=this.deleteButtonClass,t.onmousedown=(e=>{e.stopPropagation(),e.preventDefault()}),t.onclick=(e=>{e.stopPropagation(),e.preventDefault(),this.visible=!1}),this.headerElement.appendChild(this.nameElement),this.headerElement.appendChild(t),this.headerElement.appendChild(e);let n=document.createElement("slot");this.containerElement.appendChild(n),this.documentClickListener=(e=>{this.closeOnOutsideClick(e)})}static get observedAttributes(){return[i.nameAttribute,i.visibleAttribute,i.expandedAttribute]}get css(){return super.css+`     \n      :host {\n        --header-height: var(--dialog-header-height, 28px);\n        --delete-button: url(${i.DETETE_BUTTON_URL});\n        --expand-button: url(${i.EXPAND_BUTTON_URL});\n      \n        display: none;\n        background: var(--dialog-background, #ecf2f6);\n        box-shadow: var(--dialog-shadow, 2px 2px 0 0 #444);\n        z-index: 10;\n        font-family: var(--dialog-font, sans-serif);\n        font-weight: bold;\n        border: 1px solid black;\n      }\n      \n      :host([${i.visibleAttribute}]) {\n        display: block;\n      }\n    \n      :host([${i.expandedAttribute}]) {\n        width: 100%;\n        height: 100%;\n      }\n      \n      .${this.headerClass} {\n        display: flex;\n        box-sizing: border-box;\n        height: var(--header-height);\n        padding-left: 4px;\n        background-color: var(--dialog-header-background-color, #c0d5e8);\n        color: var(--dialog-header-text-color, black);\n        white-space: nowrap;\n        cursor: move;\n      }\n      \n      .${this.nameClass} {\n        flex: 1;\n        line-height: var(--header-height);\n        margin-left: 4px;\n        margin-right: 4px;\n        font-size: 14px;\n      }\n      \n      .${this.headerClass} > button {\n        float: right;\n        cursor: pointer;\n        border: none;\n        margin: 0;\n        background-color: inherit;\n        padding: unset;\n        width: var(--header-height);\n        height: var(--header-height);\n      }\n      \n      .${this.expandButtonClass}::after {\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        background-size: 18px 18px;\n        background-image: var(--expand-button);\n        background-repeat: no-repeat;\n        background-position: center;\n        content: "";\n      }\n      \n      .${this.deleteButtonClass}::after {\n        display: inline-block;\n        width: 100%;\n        height: 100%;\n        background-size: 18px 18px;\n        background-image: var(--delete-button);\n        background-repeat: no-repeat;\n        background-position: center;\n        content: "";\n      }\n    `}get name(){return this.getAttribute(i.nameAttribute)||""}set name(e){this.setAttribute(i.nameAttribute,e)}get visible(){return null!==this.getAttribute(i.visibleAttribute)}set visible(e){e?this.setAttribute(i.visibleAttribute,""):this.removeAttribute(i.visibleAttribute)}get expanded(){return null!==this.getAttribute(i.expandedAttribute)}set expanded(e){e?this.setAttribute(i.expandedAttribute,""):this.removeAttribute(i.expandedAttribute)}updateAttributes(e){let t=e[i.nameAttribute],n=e[i.visibleAttribute];if(null!==e[i.expandedAttribute]&&(this.position={x:0,y:0}),this.nameElement.innerText=null===t?"":t,null===n){if(this.opened){this.opened=!1;let e=new Event(i.EVENT_CLOSED);this.dispatchEvent(e)}}else if(!this.opened){this.opened=!0;let e=new Event(i.EVENT_OPENED);this.dispatchEvent(e)}}connectedCallback(){super.connectedCallback(),this.style.position="fixed",document.addEventListener("click",this.documentClickListener)}disconnectedCallback(){document.removeEventListener("click",this.documentClickListener)}render(e){super.render(e),e.appendChild(this.headerElement),e.appendChild(this.containerElement)}remove(){this.onRemove&&this.onRemove(this),this.parentElement&&this.parentElement.removeChild(this),document.removeEventListener("click",this.documentClickListener)}closeOnOutsideClick(e){if(!e.defaultPrevented){let t=new Set(e.composedPath());if(t.has(this))return;for(let e of this.flatChildren(i))if(t.has(e))return;this.visible=!1}}}i.EVENT_OPENED="opened",i.EVENT_CLOSED="closed",i.DETETE_BUTTON_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gMUEDkZeUosOwAAAtJJREFUWMPNmL9PFEEUxz+7IfzQkHCGQlBC7uzuYiWUlIaWno20a71/x9ROCxl7WmJ5JViZozwERCyIZ0ICQsFa+Nasm52ZvRXO+yab7CVv5r47853ve28CKiCKE4xW2fsrYA1YBzrAUiH8FOgBe0DXaPWxOIcLQRUiUZw8AjaA99TDW2DbaHXtIxZUIPMG2OZ+sGW02nGRCjxk9oEV7hcHRqtVGykboQZwDkzxMLgBFoxWAyehKE4AGsB3RoMF4Ft+pcKSk3TO6PBZpPE3oYJmpkZIaCqKk/08qSC3Qq7TlEpsB/gALFb8w6/Aa/Gl1HGqt4xWOwCBMJsBrhxkboG20aofxUkAHAHLHjLHQNNolUZx0gIOgUkHqcfAVSi62fKYZxvo5wi2gIFjzEBiUvndlzlcRrxhtPodEMVJ6gjsGK0OS6xhBvghX53HLTBntLouGdOW7SuF0SoIJDcdeHTwHEiLRiakzsQqspV5ViQjsgiALx79rYSSKF1YFM2EJV90DcyLXo6B+bKVkbFHFQ7DWihZ24dl4EJWpIg74KU8d5atvahwCADWgyhOTkpKCBus+rCkIJvObDgNPIK2naB54M6WsUUzoaxMY5jJwxru2pBjPOuImZWYxrCT1yH0oKhDKDO9S0fMZQXzLHfhcRP1hDjnUsWVsZlepqfLvNClhp4rmKcLvVC6Ax98pvdJHp95+rAXAt0KJUSzgun5zLMpc7nQHbvkOiHvm46eqxfFyQugn6vsQtFFmVgngbMoTv6Yp4xpuchI70YowbuOwFSKq1auPvKZXmaeWf2TFWiundiO4mT8Sth8kb/jqIuyiXpDkMlKl56nSz7IutlikZ91Hj9H2HncGK2m811sWaP4dIS92RNgkDfTsWulbcl1YLSa9tTa/3LZMG1LvKHFoDJNrXpapDrXMatDX8eUCH1GiL2rSWQT2DVaXdW+sPpfV3q/AM0PYtQhZQVnAAAAAElFTkSuQmCC",i.EXPAND_BUTTON_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gYHEhUdzt4g4wAAAlJJREFUWMPtmLFr20AUxn+6Oq7imoQUCs2QvyCDh9TQJVshayBbY+rVhUIH/xnlhnbJrTGXbKVdM3XwEmgyZAhkLHhIoVDToXbT0KbLU1CPk6zIqqOhHwgZcXr+9O5J7/teQAa0Ol2s0dHvNWAd2ABWgRVn+QA4BQ6AvjX62I2RhiALkVanWwM2gT3y4Tmwa40eTyIWZCDzDNilGLSt0b00UsEEMh+BRxSLI2t0M4lUEqEl4By4y7/BBbBsjR6mEmp1ugBLwFdmg2XgczxTyvMmnTM7fJLS+DtDE2rmDPgAhMDClAQWgQbwIKmmgliGfG/TGbAl5wC4MyWhqsR75ZBqW6N7AIGkax4YeQLsAC+A3wVuUx14Bzxxrt8DRkrqpp1wc+gU/pw85U2PuViMn8A3z39tWqOpxDLhw4Js0y+gArwEHufIyiHwGrhMWbMH7FekN2WBEjJbObfqTYaeuaakUZYF60q6dlmwoURClAWryqNnbhMripLhP6EshAYl4jNQIsjLglMl7qAsOFBAv0SE+iryTWWANfo46vbbGTzXlXTtPDiU+yd5t2uBVgO+exa9BZ6Khon0UJCD0FVMelSBfY9qqAHjigi0UavTbXsk7KIEiAhdFrAzVYnrGsjx9YdRBHYPOHIWNuRJ6jmVonvUJV7DEfm9yHkEHrf6wzGIX4CTBNk5reu4sEaHcRfrM4oPZ+jN7gPDuFEsnZVOaq5Da3Toqamihg0hMMzc7SN7a41uplikvOOY5o3HMZ5CnxdiOzmJbAPvrdGj3AOr2xrp/QFWN+Jth0cnawAAAABJRU5ErkJggg==",i.expandedAttribute="expanded",i.visibleAttribute="visible",i.nameAttribute="name";class o extends i{constructor(){super(),this.confirmButton=document.createElement("button"),this.confirmButton.className=o.confirmButtonClass,this.confirmButton.innerText="Yes",this.confirmButton.onclick=this.onConfirmed.bind(this)}get css(){return super.css+`\n        .${o.confirmButtonClass} {\n            float: right;\n            margin: 2px;\n            cursor: pointer;\n        }\n    `}render(e){super.render(e),e.appendChild(this.confirmButton)}set confirmationText(e){this.confirmButton.innerText=e}set disabled(e){this.confirmButton.disabled=Boolean(e)}onConfirmed(e){e.preventDefault(),this.visible=!1;let t=new Event(o.EVENT_CONFIRMED);this.dispatchEvent(t)}}o.EVENT_CONFIRMED="confirmed",o.confirmButtonClass="confirm",customElements.define("base-dialog",i),customElements.define("confirm-dialog",o)},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(0)),s=n(0);let a=0;class l extends o.BasicFile{constructor(e,t,n,r){super(),this.created=new Date,this.icon=null,this.extra={},this.parent=e,this.name=t,this.mimeType=n||"application/octet-stream",this.fileData=r||new ArrayBuffer(0),this.lastModified=new Date,a++,this.id=a.toString()}onChange(){super.onChange(),this.parent.onChildChange()}get url(){let e=new Uint8Array(this.fileData),t=String.fromCharCode.apply(null,e);return`data:${this.mimeType};base64,${btoa(t)}`}get size(){return this.fileData.byteLength}read(){return r(this,void 0,void 0,function*(){return this.fileData})}write(e){return r(this,void 0,void 0,function*(){return this.fileData=e,this.lastModified=new Date,this.onChange(),e})}delete(){return r(this,void 0,void 0,function*(){this.parent.removeChild(this)})}rename(e){return r(this,void 0,void 0,function*(){if(this.parent.nameExists(e))throw new s.FileAlreadyExistsError(`name ${e} already exists`);this.name=e,this.lastModified=new Date,this.onChange()})}}t.MemoryFile=l;class h extends o.Directory{constructor(e,t){super(),this.created=new Date,this.icon=null,this.extra={},this.children=[],this.parent=e,this.name=t,a++,this.id=a.toString()}get lastModified(){return 0===Object.values(this.children).length?this.created:new Date(Math.max.apply(null,Object.values(this.children).map(function(e){return new Date(e.lastModified).getTime()})))}get path(){return null===this.parent?[this.name]:this.parent.path.concat([this.name])}onChildChange(){this.onChange()}delete(){return r(this,void 0,void 0,function*(){null!==this.parent&&this.parent.removeChild(this)})}rename(e){return r(this,void 0,void 0,function*(){if(null!==this.parent&&this.parent.nameExists(e))throw new s.FileAlreadyExistsError(`name ${e} already exists`);this.name=e,this.onChange()})}getChildren(){return r(this,void 0,void 0,function*(){return this.children.slice()})}search(e){return r(this,void 0,void 0,function*(){let t=[],n=this.path;for(let r of this.children)if(r.name.includes(e)&&t.push({path:n.concat([r.name]),file:r}),r instanceof o.Directory){let n=yield r.search(e);t=t.concat(n)}return t})}nameExists(e){return this.children.reduce((e,t)=>(e.add(t.name),e),new Set).has(e)}addFile(e,t,n){return r(this,void 0,void 0,function*(){if(this.nameExists(t))throw new s.FileAlreadyExistsError(`file named ${t} already exists`);let r=new l(this,t,n,e);return this.addChild(r),r})}addDirectory(e){return r(this,void 0,void 0,function*(){if(this.nameExists(e))throw new s.FileAlreadyExistsError(`file named ${e} already exists`);let t=new h(this,e);return this.addChild(t),t})}addChild(e){this.children.push(e),this.onChange()}removeChild(e){this.children=this.children.filter(t=>t!==e),this.onChange()}}t.MemoryDirectory=h},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var r=n(2);class i extends r.CustomElement{constructor(){super(),this._position={x:0,y:0},this._velocity={x:0,y:0},this.motionTimeout=null,this.lastPositionUpdateTime=null,this.frictionCoef=100,this.timeStep=.01}updateAttributes(e){}connectedCallback(){super.connectedCallback(),this.style.position="absolute",this.lastPositionUpdateTime=null,this.position={x:0,y:0}}get position(){return Object.assign({},this._position)}set position(e){let t=this._position;this._position={x:e.x||0,y:e.y||0},this.style.left=`${Math.round(this._position.x).toString()}px`,this.style.top=`${Math.round(this._position.y).toString()}px`;let n=(new Date).getTime();if(null!==this.lastPositionUpdateTime){let e=(n-this.lastPositionUpdateTime)/1e3;this.velocity={x:(this._position.x-t.x)/e,y:(this._position.y-t.y)/e}}this.lastPositionUpdateTime=n}get frictionForce(){let e=this.velocity,t=Math.sign(e.x)||0,n=Math.sign(e.y)||0;return{x:-1*t*this.frictionCoef,y:-1*n*this.frictionCoef}}get velocity(){return this._velocity||{x:0,y:0}}set velocity(e){this.motionTimeout&&clearTimeout(this.motionTimeout),this.motionTimeout=null;let t=e.x,n=e.y;if(this._velocity={x:t,y:n},t>0||n>0)if(this.speed<10)this.velocity={x:0,y:0};else{const e=this.timeStep;this.motionTimeout=window.setTimeout(()=>{let r=this.position;this.position={x:r.x+t*e,y:r.y+n*e};let i=this.frictionForce,o=t+i.x*e,s=n+i.y*e;Math.sign(o)!==Math.sign(t)&&(o=0),Math.sign(s)!==Math.sign(n)&&(s=0),this.velocity={x:o,y:s}},1e3*e)}}get speed(){let e=this.velocity;return Math.sqrt(e.x*e.x+e.y*e.y)}center(){let e=this.getBoundingClientRect(),t=window.innerWidth/2-e.width/2,n=window.innerHeight/2-e.height/2;this.position={x:t,y:n},this.velocity={x:0,y:0}}}class o extends i{constructor(){super(),this.startPosition={x:0,y:0},this.mouseStartPosition={x:0,y:0},this.includeChildren=!1,this.noPropagate=!1,this.onmousedown=(e=>{this.noPropagate&&e.stopImmediatePropagation(),(e.target===this||this.includeChildren)&&(e.preventDefault(),this.startPosition=this.position,this.mouseStartPosition={x:e.clientX,y:e.clientY},this.startDrag())})}startDrag(){document.onmousemove=(e=>{e.preventDefault(),this.noPropagate&&e.stopImmediatePropagation();let t=e.clientX-this.mouseStartPosition.x,n=e.clientY-this.mouseStartPosition.y;this.position={x:this.startPosition.x+t,y:this.startPosition.y+n},this.velocity={x:0,y:0}}),document.onmouseup=this.stopDrag.bind(this)}stopDrag(e){this.noPropagate&&e.stopImmediatePropagation(),e.preventDefault(),document.onmousemove=null,document.onmouseup=null}}class s extends i{constructor(){super(),this.touchStartPosition={},this.scrollSpeed=s.defaultScrollSpeed,this.onwheel=(e=>{let t=this.position;t.y-=e.deltaY*this.scrollSpeed,this.position=t}),this.ontouchstart=(e=>{for(let t of e.targetTouches)this.touchStartPosition[t.identifier]={coords:{x:t.clientX,y:t.clientY},elementPosition:this.position}}),this.ontouchmove=(e=>{for(let t of e.targetTouches){let e=this.touchStartPosition[t.identifier];if(e){let n=t.clientX-e.coords.x,r=t.clientY-e.coords.y;this.position={x:e.elementPosition.x+n,y:e.elementPosition.y+r}}}}),this.ontouchend=(e=>{for(let t of e.targetTouches)delete this.touchStartPosition[t.identifier]})}static get observedAttributes(){return[s.scrollSpeedAttribute]}updateAttributes(e){let t=e[s.scrollSpeedAttribute];this.scrollSpeed=null===t?s.defaultScrollSpeed:Number.parseFloat(t)}}s.defaultScrollSpeed=1,s.scrollSpeedAttribute="scroll-speed"},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(0));let s=0,a=[];t.ProcessFile=class extends o.BasicFile{constructor(){super(),this.created=new Date,this.lastModified=new Date,this.extra={},s++,this.id=s.toString(),a.push(this)}get name(){return this.id}get url(){return null}get icon(){return null}get size(){return 0}get mimeType(){return"text/plain"}delete(){return r(this,void 0,void 0,function*(){a=a.filter(e=>e!==this)})}read(){throw new Error("Cannot rename process file")}rename(e){throw new Error("Cannot rename process file")}write(e){throw new Error("Cannot write to process file")}};t.ProcessDirectory=class extends o.Directory{constructor(){super(...arguments),this.created=new Date,this.lastModified=new Date,this.extra={}}get id(){return"proc"}get name(){return"proc"}get url(){return null}get icon(){return null}getChildren(){return r(this,void 0,void 0,function*(){return console.log("PROC CHILD",a.slice()),a.slice()})}delete(){throw new Error("Cannot delete process directory")}rename(e){throw new Error("Cannot rename process directory")}search(e){throw new Error("Cannot search process directory")}addFile(e,t,n){return r(this,void 0,void 0,function*(){throw new Error("Cannot add file to process directory")})}addDirectory(e){return r(this,void 0,void 0,function*(){throw new Error("Cannot add directory to process directory")})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(6),o=n(1),s=Object.getPrototypeOf(function(){return r(this,void 0,void 0,function*(){})}).constructor,a='\n    // wrap onmessage setup in function so that variables created (id, calls, etc.)\n    // aren\'t in worker script scope.\n    onmessage = function () {\n        const AsyncFunction = Object.getPrototypeOf(async function(){}).constructor;\n    \n        let id = 0;\n        const calls = {};\n    \n        const system = new Proxy({}, {\n            get: function (obj, sysCallName) {\n                // Make a system call "prop"\n                return (...args) => {\n                    return new Promise((resolve, reject) => {\n                        id ++;\n                        calls[id] = resolve;\n                        postMessage([id, sysCallName].concat(args));\n                    });\n                }\n            }\n        });\n        \n        function initialize(e) {\n            let func = new AsyncFunction(\'system\', e.data);\n            func.bind(this)(system)\n                .then(() => {\n                    return system.exit("");\n                }).catch((error) => {\n                system.error(error.toString());\n                console.log(error);\n            });\n            messageHandler = handleCallReturn;\n        }\n        \n        function handleCallReturn(e) {\n            let id = e.data[0];\n            let data = e.data[1];\n            let sysCall = calls[id];\n            if (sysCall){\n                delete calls[id];\n                sysCall(data);\n            }\n        }\n        \n        let messageHandler = initialize;\n    \n    \n        return messageHandler;\n    }();\n';let l=0;class h extends i.ProcessFile{constructor(e,t,n,r,i){super(),this.fileDescriptors={},this.parentProcess=e,this.workingDirectory=t,this.executablePath=n,this.executableName=n[n.length-1],this.stdin=this,this.stdout=r,this.stderr=i,this.worker=new Worker("data:application/javascript,"+encodeURIComponent(a)),this.worker.onmessage=(e=>{let t=e.data[0],n=e.data[1],r=e.data.slice(2);console.log("WORKER CALL",n);let i=this.systemCalls[n];i?i(...r).then(e=>{this.worker.postMessage([t,e])}).catch(e=>{let t=o.stringToArrayBuffer(`System error: ${e}`);return this.onExit(),this.stderr.write(t)}):console.log(`Invalid operation ${n}`)}),this.workingDirectory.getFile(this.executablePath).then(e=>e.read()).then(e=>o.parseTextArrayBuffer(e)).then(e=>this.worker.postMessage(e)).catch(e=>{let t=o.stringToArrayBuffer(`File ${this.executableName} could not be executed: ${e}`);return this.onExit(),this.stderr.write(t)})}get name(){return this.executableName}fork(){return new h(this,this.workingDirectory,[this.executableName],this.stdout,this.stderr)}get systemCalls(){let e=e=>{let t=this.fileDescriptors[e];if(void 0===t)throw new Error("File is not open.");return t};return{import:(e,t)=>r(this,void 0,void 0,function*(){let n=yield this.workingDirectory.getFile(e),r=yield n.readText();try{let n=new s(`${r};return ${t};`);return yield n.bind(this)()}catch(t){throw new Error(`Error importing file at ${e.join("/")}: ${t}`)}}),open:e=>r(this,void 0,void 0,function*(){let t=yield this.workingDirectory.getFile(e);return l++,this.fileDescriptors[l]=t,l}),close:e=>r(this,void 0,void 0,function*(){delete this.fileDescriptors[e]}),read:t=>r(this,void 0,void 0,function*(){let n=e(t);return yield n.read()}),write:(t,n)=>r(this,void 0,void 0,function*(){let r=e(t);return yield r.write(n)}),fork:()=>r(this,void 0,void 0,function*(){let e=new h(this,this.workingDirectory,[this.executableName],this.stdout,this.stderr);return Number.parseInt(e.id)}),exec:(e,...t)=>r(this,void 0,void 0,function*(){let t=new h(this,this.workingDirectory,e,this.stdout,this.stderr);return Number.parseInt(t.id)}),exit:e=>r(this,void 0,void 0,function*(){let t=o.stringToArrayBuffer(e);yield this.stdout.write(t),this.onExit()}),error:e=>r(this,void 0,void 0,function*(){let t=o.stringToArrayBuffer(`The process ${this.name} returned an error: ${e}`);yield this.stderr.write(t),this.onExit()})}}execPath(e,...t){return r(this,void 0,void 0,function*(){return new h(this,this.workingDirectory,e,this.stdout,this.stderr).id})}onExit(){this.worker.terminate(),this.delete()}}t.Process=h},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1),s=i(n(0));t.ConsoleFile=class extends s.BasicFile{constructor(){super(),this.created=new Date,this.lastModified=new Date,this.extra={}}get id(){return"console"}get name(){return"console"}get icon(){return null}get url(){return null}get mimeType(){return"text/plain"}get size(){return 0}read(){return r(this,void 0,void 0,function*(){return new ArrayBuffer(0)})}write(e){return r(this,void 0,void 0,function*(){return console.log(o.parseTextArrayBuffer(e)),e})}delete(){return r(this,void 0,void 0,function*(){throw new Error("can't delete console")})}rename(e){return r(this,void 0,void 0,function*(){throw new Error("can't rename console")})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0}),n(10),n(26),n(11),n(27),n(14),n(3);const o=n(10),s=n(0),a=n(1),l=i(n(12)),h=n(28),c=n(3),u=n(14),d=n(4),A=n(13),f=n(2),p=n(11),g=n(7),m=n(8),y=n(27);class C extends u.Row{constructor(){super(),this._file=null,this._path=null,this.folderIcon=a.createNode(l.folderIcon),this.folderIcon.classList.add(v.tableIconClass),this.documentIcon=a.createNode(l.documentIcon),this.documentIcon.classList.add(v.tableIconClass)}get css(){return super.css+`\n        :host(.${C.pendingActionClass}) {\n            animation-name: pending-action;\n            animation-delay: 1s;\n            animation-duration: 2s;\n        }\n        @keyframes pending-action {\n            to {background-color: var(--table-selected-item-color, #5d91e5)}\n        }\n    `}get file(){return this._file}set file(e){let t=document.createElement("table-data"),n=document.createElement("table-data"),r=document.createElement("table-data"),i=document.createElement("table-data"),o=document.createElement("table-data"),l=document.createElement("table-data");if(this._file=e,null!==this._file){if(this.hidden=this._file.name.startsWith("."),t.innerText=this._file.id,r.innerText=a.convertBytesToReadable(this._file.size),i.innerText=new Date(this._file.lastModified).toLocaleString(),o.innerText=new Date(this._file.created).toLocaleString(),l.innerText=this._file.mimeType,null!==this._file.icon){let e=document.createElement("img");if(e.width=22,e.height=22,e.ondragstart=(()=>!1),e.classList.add(v.tableIconClass),n.appendChild(e),this._file.directory)e.src=this._file.icon;else{e.src=this._file.icon;let t=document.createElement("img");t.className=C.hoverImageClass,t.style.display="none",e.onmouseover=(e=>{null!==this._file&&null!==this._file.url&&(console.log("URL",this._file.url),t.src=this._file.url),t.style.display="inline-block"}),e.onmouseout=(()=>{t.style.display="none"}),n.appendChild(t)}}else this._file instanceof s.Directory?n.appendChild(this.folderIcon):n.appendChild(this.documentIcon);let e=document.createTextNode(this._file.name);n.appendChild(e)}this.removeChildren(),this.appendChildren([t,n,r,i,o,l])}get path(){return this._path}set path(e){this._path=e}handleDragStart(e){if(super.handleDragStart(e),null!==e.dataTransfer&&null!==this._path){let t={move:[this._path],copy:[]};e.dataTransfer.setData(v.dataTransferType,JSON.stringify(t)),e.dataTransfer.dropEffect="move"}}}C.hoverImageClass="hover-image",t.FileTableRow=C;class v extends f.CustomElement{constructor(){super(),this.maxNumMove=30,this.maxNumCopy=30,this.activePromises=new Set,this.cachedCurrentDirectory=new A.CachedProxyDirectory(new d.MemoryDirectory(null,"root")),this.table=document.createElement("selectable-table"),this.table.setAttribute("select-multiple",""),this.breadCrumbs=document.createElement("bread-crumbs"),this.dropdownMenuIcon=a.createNode(l.dropdownMenuIcon),this.dropdownMenuIcon.classList.add(v.tableIconClass),this.carrotIcon=a.createNode(l.carrotIcon),this.carrotIcon.classList.add(v.tableIconClass),this.carrotIcon.classList.add("small"),this.fileContextMenu=document.createElement("file-browser-context-menu"),this.fileContextMenu.name="Settings",this.actionsContainer=document.createElement("div"),this.actionsContainer.className=v.actionsContainerClass,this.messagesContainer=document.createElement("div"),this.messagesContainer.className=v.messageContainerClass,this.menusContainer=this.createMenus(),this.searchElement=document.createElement("search-bar"),this.tableContainer=document.createElement("div"),this.tableContainer.className=v.tableContainerClass,this.tableBusyOverlay=document.createElement("div"),this.tableContainer.appendChild(this.table),this.tableContainer.appendChild(this.tableBusyOverlay),this.actionsContainer.appendChild(this.breadCrumbs),this.actionsContainer.appendChild(this.messagesContainer),this.actionsContainer.appendChild(this.menusContainer),this.actionsContainer.appendChild(this.searchElement);let e=document.createElement("file-header");this.table.appendChild(e),document.addEventListener("copy",e=>{this.table.selectedRows.length>0&&this.onCutOrCopy(e)}),document.addEventListener("cut",e=>{this.table.selectedRows.length>0&&this.onCutOrCopy(e)}),this.addEventListener("paste",e=>{this.onPaste(e)}),this.table.ondrop=(e=>{null!==e.dataTransfer&&this.handleDataTransfer(e.dataTransfer)}),this.table.addEventListener(u.Table.EVENT_SELECTION_CHANGED,()=>{let e=new Event(v.EVENT_SELECTED_FILES_CHANGE);this.dispatchEvent(e)}),this.ondblclick=(e=>{let t=a.getFirstInPath(e,C);null!==t&&this.onFileRowDoubleClick(t)}),this.searchElement.addEventListener(p.SearchBar.EVENT_SEARCH_CHANGE,()=>{this.search(this.searchElement.value)}),this.breadCrumbs.addEventListener(o.BreadCrumbs.EVENT_PATH_CHANGE,e=>{this.path=this.breadCrumbs.path}),this.oncontextmenu=(e=>{let t=this.flatChildren(y.ContextMenu);if(t.length>0){e.preventDefault();for(let n of t)n.position={x:e.pageX,y:e.pageY},n.velocity={x:0,y:0},n.visible=!0}}),this.busy=Promise.resolve(),this.setCurrentDirectory(new A.CachedProxyDirectory(new d.MemoryDirectory(null,"root")))}static get observedAttributes(){return[]}updateAttributes(e){}get rootDirectory(){return this.cachedCurrentDirectory.root}set rootDirectory(e){this.setCurrentDirectory(new A.CachedProxyDirectory(e))}get currentDirectory(){return this.cachedCurrentDirectory}setCurrentDirectory(e){this.cachedCurrentDirectory=e,this.cachedCurrentDirectory.addOnChangeListener(()=>{this.logAndLoadWrapper(this.refreshFiles())}),this.logAndLoadWrapper(this.refreshFiles()),this.breadCrumbs.path=this.path}get files(){let e=[];for(let t of this.table.flatChildren(C)){let n=t.file;null!==n&&e.push(n)}return e}get selectedFileRows(){return this.table.selectedRows.filter(e=>e instanceof C)}get selectedFiles(){let e=[];for(let t of this.selectedFileRows){let n=t.file;null!==n&&e.push(n)}return e}get path(){return this.cachedCurrentDirectory.path.map(e=>e.name)}set path(e){this.logAndLoadWrapper(this.cachedCurrentDirectory.root.getFile(e.slice(1)).then(e=>{if(!(e instanceof A.CachedProxyDirectory))throw new s.FileNotFoundError("file must be a directory");this.setCurrentDirectory(e)}))}get css(){return super.css+`\n        :host {\n          --top-row-height: 30px;\n          \n          --focus-item-color: #c0d5e8;\n          \n          --message-height: 24px;\n          --search-height: var(--top-row-height);\n          --search-icon-size: var(--icon-size);\n          --search-icon-color: var(--icon-color);\n          --table-body-text-color: var(--body-text-color);\n          --dialog-header-height: 28px;\n          --dialog-header-background-color: var(--focus-item-color);\n          --dialog-header-text-color: black;\n          --table-background-color: var(--browser-background);\n          \n          font-family: var(--browser-font, sans-serif);\n        }\n\n        .${v.tableIconClass} {\n          display: inline-block;\n          width: var(--icon-size, 22px);\n          height: var(--icon-size, 22px);\n          vertical-align: middle;\n          margin: 5px;\n          fill: var(--icon-color, black);\n        }\n        \n        .${v.actionsContainerClass} {\n            width: 100%;\n            overflow: auto;\n        }\n        \n        .${v.actionsContainerClass} .${v.tableIconClass} {\n          fill: var(--action-icon-color, black);\n        }\n\n        .${v.tableIconClass}.small {\n          width: var(--icon-size-small, 12px);\n          height: var(--icon-size-small, 12px);\n        }\n\n        .${v.tableIconClass}.large {\n          width: var(--icon-size-large, 32px);\n          height: var(--icon-size-large, 32px);\n        }\n        \n        .${v.buttonClass} {\n          position: relative;\n          display: inline-block;\n          box-sizing: border-box;\n          padding: 0;\n          text-align: center;\n          min-width: var(--button-min-width);\n          overflow: hidden;\n          text-transform: uppercase;\n          border-radius: 4px;\n          outline-color: #ccc;\n          background-color: var(--button-color);\n          height: var(--button-height);\n          line-height: var(--button-height);\n        }\n        \n        .${v.buttonClass}:hover {\n            background-color: var(--button-hover-color);\n        }\n\n        selectable-table {\n          width: 100%;\n        }\n\n        selectable-table.dialog-item {\n          /*If inside dialog, make smaller*/\n          height: 300px;\n        }\n        \n        .${v.tableContainerClass} {\n            position: relative;\n            width: 100%;\n        }\n      \n        .${v.tableContainerClass} > div {\n          position: absolute;\n          top: 0;\n          display: none;\n          width: 100%;\n          height: 100%;\n          background-color: rgba(0, 0, 0, 0.1);\n          background-position: center;\n          background-repeat: no-repeat;\n          background-size: 50px 50px;\n        }\n        \n        .${v.tableContainerClass}.${v.activeAjaxClass} > div {\n          background-image: url(data:image/gif;base64,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);\n          display: block;\n        }\n        \n        selectable-table.${u.Table.dragOverClass} + div {          \n          background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAhVJREFUeJzt3bEKhDAQQEH1//9Zy2vkqYgXkZk6xcLmkTLTBAAAAAAAAAD8zKMH+IB19AAH7PiGZfQA8GYCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCPOFs+tjU8D/nbr7XhAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAgCgSAQCAKBIBAIAoEgEAhX/kln39v/j7fjG7wgEAQCQSAQBAJBIBAEAkEgEAQCQSAQBAJBIBAEAkEgEAQCQSAQBAJBIBAEAkEgEAQCQSAQBAJBIBAEAkEgEAQCQSAQBAJBIBAEAkEgEAQCQSAQBAJBIBAEAkEgEAQCQSAQBAJBIBAEAkEgEAQCQSAQBAJBIBAEAkEgEAQCQSAQBAJBIBAEAkEgEAQCQSAQBAJBIBAEAkEgEAQCQSAQBAJBIBAEAkEgEAQCQSAAAAAAAAAAAJy0AdBdBGYni5DTAAAAAElFTkSuQmCC);\n          display: block;\n          pointer-events: none; /*prevent interfering with drag&drop*/\n        }\n        \n        selectable-table .${C.hoverImageClass} {\n          position: absolute;\n          top: calc(2 * var(--table-row-height));\n          max-height: calc(100% - 3 * var(--table-row-height));\n          z-index: 99999;\n          background-color: white;\n          border: 1px solid black;\n          box-shadow: var(--browser-shadow);\n        }\n        \n        search-bar {\n            float: right;\n        }\n        \n        .${v.menuContainerClass} {\n            float: left;\n        }\n    `}render(e){super.render(e),e.appendChild(this.breadCrumbs),e.appendChild(this.actionsContainer),e.appendChild(this.tableContainer);let t=document.createElement("slot");e.appendChild(t),this.appendChild(this.fileContextMenu)}loadingWrapper(e){return r(this,void 0,void 0,function*(){this.activePromises.add(e),this.tableContainer.classList.add(v.activeAjaxClass);try{return yield e}finally{this.activePromises.delete(e),0===this.activePromises.size&&this.tableContainer.classList.remove(v.activeAjaxClass)}})}errorLoggingWrapper(e){return r(this,void 0,void 0,function*(){try{return yield e}catch(e){this.addMessage(e,!0)}})}logAndLoadWrapper(e){return this.loadingWrapper(this.errorLoggingWrapper(e))}createMenus(){let e=document.createElement("div");e.className=v.menuContainerClass;let t=document.createElement("div");return t.className=v.buttonClass,t.appendChild(this.dropdownMenuIcon.cloneNode(!0)),t.appendChild(this.carrotIcon.cloneNode(!0)),t.onclick=(e=>{e.stopPropagation();let n=t.getBoundingClientRect(),r=document.documentElement.scrollLeft,i=document.documentElement.scrollTop;this.showContextMenu(n.left+r,n.bottom+i)}),e.appendChild(t),e}copyUrl(e){return r(this,void 0,void 0,function*(){let t=yield fetch(e),n=yield t.blob(),r=yield a.fileToArrayBuffer(n);return this.currentDirectory.addFile(r,name,n.type)})}moveFiles(e){if(e.length>this.maxNumMove)throw new Error(`cannot move more than ${this.maxNumMove} items.`);let t=document.createElement("confirm-dialog");t.name="Confirm Move",t.onClose=(()=>{t.remove()});let n=document.createElement("div"),r=e.map(e=>e.name);n.innerText=`Are you sure you want to move ${r.join(", ")}?`,t.addEventListener(c.ConfirmDialog.EVENT_CONFIRMED,()=>{let t=[];for(let n of e)t.push(n.move(this.currentDirectory));this.logAndLoadWrapper(Promise.all(t).then(()=>{}))}),t.appendChild(n),document.body.appendChild(t),t.visible=!0,t.center()}copyFiles(e){if(e.length>this.maxNumCopy)throw new Error(`cannot move more than ${this.maxNumCopy} items.`);let t=document.createElement("confirm-dialog");t.name="Confirm Copy",t.onClose=(()=>{t.remove()});let n=document.createElement("div"),r=e.map(e=>e.name);n.innerText=`Are you sure you want to copy ${r.join(", ")}?`,t.addEventListener(c.ConfirmDialog.EVENT_CONFIRMED,()=>{let t=[];for(let n of e)t.push(n.copy(this.currentDirectory));this.logAndLoadWrapper(Promise.all(t).then(()=>{}))}),t.appendChild(n),document.body.appendChild(t),t.visible=!0,t.center()}handleDataTransfer(e){this.clearMessages();let t=[];for(let n of e.files)t.push(a.fileToArrayBuffer(n).then(e=>this.currentDirectory.addFile(e,n.name,n.type)));let n=e.getData("text/uri-list");if(n){let e=n.split("\n");if(e.length>this.maxNumMove)alert(`Cannot move more than ${this.maxNumMove} items.`);else for(let n=0;n<e.length;n++){let r=e[n];if(!r.startsWith("#")){let e=r.split("/"),n="unknown";e.length>0&&e[e.length-1].length<255&&(n=e[e.length-1]),t.push(this.copyUrl(r))}}}this.logAndLoadWrapper(Promise.all(t).then(()=>{}));let r=e.getData(v.dataTransferType);if(r){let e=JSON.parse(r);if(!function(e){function t(e){for(let t of e){if(!(t instanceof Array))return!1;for(let e in t)if("string"!=typeof e)return!1}return!0}return e.move instanceof Array&&e.copy instanceof Array&&t(e.copy)&&t(e.move)}(e))return console.log(r),void this.addMessage("invalid data",!0);let t=e=>{let t=[];for(let n of e)n.length>0&&n[0]===this.rootDirectory.name&&t.push(this.rootDirectory.getFile(n.slice(1)));return t};e.move.length>0&&Promise.all(t(e.move)).then(e=>{this.moveFiles(e)}),e.copy.length>0&&Promise.all(t(e.copy)).then(e=>{this.copyFiles(e)})}}onFileRowDoubleClick(e){let t=e.file,n=e.path;if(null!==t)if(t instanceof s.Directory)null!==n&&(this.path=n);else if(null!==t.url)if(t.url.startsWith("data")){let e=document.createElement("a");e.href=t.url||"",e.setAttribute("download",t.name),e.click()}else window.open(t.url)}onCutOrCopy(e){e.preventDefault();let t="",n=[];for(let e of this.table.selectedRows)if(e instanceof C){let r=e.file,i=e.path;null!==r&&null!==r.url&&(t+=r.url+"\r\n"),null!==i&&n.push(i)}e.clipboardData.setData("text/plain",t);let r={move:[],copy:[]};"copy"===e.type?r.copy=r.copy.concat(n):"cut"==e.type&&(r.move=r.move.concat(n)),e.clipboardData.setData(v.dataTransferType,JSON.stringify(r))}onPaste(e){this.handleDataTransfer(e.clipboardData)}search(e){return r(this,void 0,void 0,function*(){this.clearMessages(),e?yield this.logAndLoadWrapper((()=>r(this,void 0,void 0,function*(){let t=yield this.currentDirectory.search(e),n=this.path.join("/");this.addMessage(`${t.length} search results for "${e}" in ${n}.`),yield this.setTableData(t)}))()):yield this.logAndLoadWrapper(this.resetFiles())})}setTableData(e){let t=[];for(let n of e){let e=document.createElement("file-row");e.file=n.file,e.path=n.path,n.file instanceof s.Directory&&e.addDragoverAction(()=>{null!==n.path&&(this.path=n.path)}),t.push(e)}this.table.rows=t,this.dispatchEvent(new Event(v.EVENT_FILES_CHANGE))}showContextMenu(e,t){let n=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:e,clientY:t});this.dispatchEvent(n)}execute(e){let t=new m.ConsoleFile;new g.Process(null,this.rootDirectory,e,t,t)}addMessage(e,t){console.log(e),console.trace();let n=document.createElement("user-message");(e instanceof Error||t)&&n.setAttribute("error",""),n.innerText=e.toString(),this.messagesContainer.appendChild(n)}clearMessages(){for(;this.messagesContainer.firstChild;)this.messagesContainer.removeChild(this.messagesContainer.firstChild)}resetFiles(){return this.busy=(()=>r(this,void 0,void 0,function*(){try{yield this.busy}catch(e){}let e=(yield this.currentDirectory.getChildren()).map(e=>({path:this.path.concat([e.name]),file:e}));yield this.setTableData(e)}))(),this.busy}refreshFiles(){return this.cachedCurrentDirectory.clearCache(),this.resetFiles()}}v.actionsContainerClass="file-actions-container",v.tableContainerClass="file-table-container",v.tableIconClass="icon",v.activeAjaxClass="ajax-active",v.searchInputClass="file-search-input",v.messageContainerClass="file-message-container",v.menuContainerClass="file-menu-container",v.stateManagerContainerClass="file-breadcrumbs-container",v.buttonClass="dropdown-menu button",v.fileBrowserDialogClass="file-browser-dialog",v.dataTransferType="text/table-rows",v.EVENT_FILES_CHANGE="change",v.EVENT_SELECTED_FILES_CHANGE="selected-change",t.FileBrowser=v;t.DialogBrowser=class extends v{constructor(e,t,n){n=n||new c.ConfirmDialog,super(e,t),this._dialog=n,this.fileContextMenu.parent=this._dialog,this.table.visibleColumnsDialog.parent=this._dialog,this._dialog.items=[this.element]}get dialog(){return this._dialog}};class E extends v{constructor(){super(),this.logAndLoadWrapper(this.getConfig().then(e=>{try{this.config=e}catch(e){console.log(`Error setting browser config: ${e}`)}}))}static get configPaths(){return[this.sharedConfigPath,this.localConfigPath]}set config(e){let t=e.visibleColumns;if(null!==t)for(let e of this.table.columns)e.visible=t.includes(e.name);let n=e.defaultSortColumn;if(n){let e=!1;n.startsWith("-")&&(e=!0,n=n.slice(1));for(let t of this.table.columns)if(t.name===n){let n;n=t.sortCompare&&e?(...e)=>-t.sortCompare(...e):t.sortCompare,this.table.defaultSortFunc=n,this.setTableData(Object.values(this.getCurrentDirectory().data))}}}setupTable(){if(super.setupTable(),this.table)for(let e of this.table.columns){let t=e.onVisibilityChange;e.onVisibilityChange=(e=>{t(e);let n=[];for(let e of this.table.columns)e.visible&&n.push(e.name);this.addLocalConfig({visibleColumns:n}).then().catch(e=>{console.log(`Error adding config: ${e}`)})})}}addLocalConfigFile(){return r(this,void 0,void 0,function*(){let e=E.localConfigPath.slice(),t=this.rootDirectory,n=e.pop();if(void 0===n)throw new Error("config file path must have a name");let r=e.shift();for(;void 0!==r;)try{let e=yield t.getFile([r]);if(!(e instanceof s.Directory))throw Error(`file named ${r} already exists`);t=e}catch(e){if(!(e instanceof s.FileNotFoundError))throw e;t=yield t.addDirectory(r)}return yield t.addFile(a.stringToArrayBuffer(""),n,"text/plain")})}addLocalConfig(e){return r(this,void 0,void 0,function*(){let t,n;try{n=yield this.rootDirectory.getFile(E.localConfigPath);let r=yield n.read();t=yield h.updateConfigFile(e,r),yield n.write(t)}catch(r){r instanceof s.FileNotFoundError&&(n=yield this.addLocalConfigFile(),t=yield h.updateConfigFile(e),yield n.write(t))}})}getConfig(){return r(this,void 0,void 0,function*(){let e={},t=E.configPaths.slice(),n=t.shift();for(;void 0!==n;){let r;try{let e=yield this.rootDirectory.getFile(n),t=yield e.read();r=h.parseConfigFile(t)}catch(e){console.log(`Could not get config file at /${n.join("/")}: ${e}`),r={}}Object.assign(e,r),n=t.shift()}return{visibleColumns:(e.visibleColumns||"").split(","),defaultSortColumn:e.defaultSortColumn||null}})}}E.localConfigPath=[".config","browser"],E.sharedConfigPath=["Files",".config","browser"],t.ConfigurableFileBrowser=E,customElements.define("file-browser",v),customElements.define("file-row",C),customElements.define("file-header",class extends u.Header{constructor(){super()}refresh(){super.refresh();let e=document.createElement("table-data"),t=document.createElement("table-data"),n=document.createElement("table-data"),r=document.createElement("table-data"),i=document.createElement("table-data"),o=document.createElement("table-data");e.innerText="ID",t.innerText="Name",n.innerText="Size",r.innerText="Last Modified",i.innerText="Created",o.innerText="Type",this.appendChild(e),this.appendChild(t),this.appendChild(n),this.appendChild(r),this.appendChild(i),this.appendChild(o)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);class i extends r.CustomElement{constructor(){super(),this.startCharacter="|",this.delimiter=">",this.ul=document.createElement("ul")}updateAttributes(e){}get css(){return super.css+"\n      :host {\n        --breadcrumb-color: #5d91e5;\n        --delimiter-color: #5c6873;\n      }\n\n      ul {\n        margin: 0;\n        padding: 0;\n        list-style: none;\n        height: 26px;\n      }\n\n      /* Display list items side by side */\n      li {\n        display: inline;\n        font-size: 18px;\n      }\n\n      /* Add a slash symbol (/) before/behind each list item */\n      li {\n        color: var(--delimiter-color);\n        margin-left: 10px;\n        margin-right: 10px;\n      }\n\n      /* Add a color to all links inside the list */\n      a {\n        color: var(--breadcrumb-color);\n        text-decoration: none;\n        font-weight: bold;\n      }\n\n      /* Add a color on mouse-over */\n      a:hover {\n        color: #01447e;\n        text-decoration: underline;\n      }\n    "}get crumbs(){return null===this.shadowRoot?[]:this.shadowRoot.querySelectorAll("a")}get path(){let e=this.crumbs,t=[];for(let n of e)t.push(n.innerText);return t}set path(e){for(;this.ul.firstChild;)this.ul.removeChild(this.ul.firstChild);for(let t=0;t<e.length;t++){let n=0==t?this.startCharacter:this.delimiter;this.ul.appendChild(this.buildDelimiter(n));let r=e.slice(0,t+1);this.ul.appendChild(this.buildCrumb(r))}}render(e){super.render(e),e.appendChild(this.ul)}buildCrumb(e){let t=document.createElement("li"),n=document.createElement("a");return n.href="#",n.innerText=e[e.length-1],n.onclick=(t=>{t.preventDefault(),this.path=e,this.dispatchEvent(new Event(i.EVENT_PATH_CHANGE))}),t.appendChild(n),t}buildDelimiter(e){let t=document.createElement("li");return t.innerText=e,t}}i.EVENT_PATH_CHANGE="pathchange",t.BreadCrumbs=i,customElements.define("bread-crumbs",i)},function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=n(2),o=n(1),s=r(n(12));class a extends i.CustomElement{constructor(){super(),this.searchPending=!1,this.input=document.createElement("input"),this.input.placeholder="Search",this.input.oninput=(()=>{this.searchPending||(this.searchPending=!0,setTimeout(()=>{this.dispatchSearchEvent(),this.searchPending=!1},a.TIMEOUT))}),this.input.onkeyup=(e=>{this.searchPending||"Enter"!==e.key||this.dispatchSearchEvent()}),this.container=document.createElement("div");let e=o.createNode(s.searchIcon);this.container.appendChild(e),this.container.appendChild(this.input)}get css(){return super.css+"\n        svg {\n          display: inline-block;\n          width: var(--search-icon-size, 22px);\n          height: var(--search-icon-size, 22px);\n          vertical-align: middle;\n          margin: 5px;\n          fill: var(--search-icon-color, black);\n        }\n      \n      input {\n          height: var(--search-height, 22px);\n          padding-left: 5px;\n          margin-left: 4px;\n          border-radius: 4px;\n          border: none;\n      }\n    "}updateAttributes(e){}render(e){super.render(e),e.appendChild(this.container)}dispatchSearchEvent(){let e=new Event(a.EVENT_SEARCH_CHANGE);this.dispatchEvent(e)}get value(){return this.input.value}}a.EVENT_SEARCH_CHANGE="search",a.TIMEOUT=500,t.SearchBar=a,customElements.define("search-bar",a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dropdownMenuIcon='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="220" height="220" viewBox="0 0 440 440">  <path d="M170 423 c0 -38 -15 -46 -49 -29 -31 17 -32 16 -62 -13 -29 -30 -30\n-31 -13 -62 17 -34 9 -49 -28 -49 -26 0 -26 -100 0 -100 37 0 45 -15 28 -49\n-17 -31 -16 -32 13 -62 30 -29 31 -30 62 -13 34 17 49 9 49 -28 0 -26 100 -26\n100 0 0 37 15 45 49 28 31 -17 32 -16 62 13 29 30 30 31 13 62 -17 34 -9 49\n29 49 25 0 25 100 0 100 -38 0 -46 15 -29 49 17 31 16 32 -13 62 -30 29 -31\n30 -62 13 -34 -17 -49 -9 -49 29 0 25 -100 25 -100 0z m105 -148 c50 -49 15\n-135 -55 -135 -41 0 -80 39 -80 80 0 19 9 40 25 55 15 16 36 25 55 25 19 0 40\n-9 55 -25z"/>  <path d="M182 258 c-15 -15 -15 -61 0 -76 15 -15 61 -15 76 0 15 15 15 61 0\n76 -7 7 -24 12 -38 12 -14 0 -31 -5 -38 -12z"/></svg>',t.carrotIcon='<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="24pt" height="16pt" viewBox="0 0 24 16">  <path d="M 12,16 0,7 5.25,0.25 12,5.5 18,0.25 24,7 Z"/></svg>',t.searchIcon='<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="220" height="220" viewBox="0 0 440 440">  <path d="m 180,310 -40,56 C 116,396 86,422 74,426 30,438 2,410 14,366 18,354 44,324 74,300 l 56,-40 C 81.263674,188.193 104,100 160,50 220,-3 326,-4 380,60 c 53,62 59,175 1,229 C 320,346 225,354 180,310 Z M 340,100 C 247,-3 100,140 190,250 282,347 435,206 340,100 Z"/></svg>',t.folderIcon='<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="220" height="220" viewBox="0 0 440 440">  <path d="M0 220 l0 190 220 0 220 0 0 -166 0 -165 -124 0 -125 0 -16 -28 c-15 -26 -20 -27 -96 -27 l-79 0 0 -190z"/></svg>',t.documentIcon='<svg xmlns="http://www.w3.org/2000/svg" version="1.0" width="220" height="220" viewBox="0 0 440 440">  <path d="M 390,220 V 440 H 215 40 V 278 116 L 97,58 154,0 H 272 390 Z M 124,130 H 80 V 265 400 H 215 350 V 220 41 H 170 v 90 0 z"/></svg>'},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(0));class s extends o.BasicFile{constructor(e){super(),this.concreteFile=e}get id(){return this.concreteFile.id}get name(){return this.concreteFile.name}get directory(){return this.concreteFile.directory}get url(){return this.concreteFile.url}get icon(){return this.concreteFile.icon}get size(){return this.concreteFile.size}get mimeType(){return this.concreteFile.mimeType}get lastModified(){return this.concreteFile.lastModified}get created(){return this.concreteFile.created}get extra(){return this.concreteFile.extra}addOnChangeListener(e){this.concreteFile.addOnChangeListener(e)}read(){return this.concreteFile.read()}write(e){return this.concreteFile.write(e)}rename(e){return this.concreteFile.rename(e)}delete(){return this.concreteFile.delete()}}t.ProxyFile=s;class a extends o.Directory{constructor(e){super(),this.concreteDirectory=e}get id(){return this.concreteDirectory.id}get name(){return this.concreteDirectory.name}get directory(){return this.concreteDirectory.directory}get url(){return this.concreteDirectory.url}get icon(){return this.concreteDirectory.icon}get lastModified(){return this.concreteDirectory.lastModified}get created(){return this.concreteDirectory.created}get extra(){return this.concreteDirectory.extra}onChange(){this.concreteDirectory.onChange()}addOnChangeListener(e){this.concreteDirectory.addOnChangeListener(e)}rename(e){return this.concreteDirectory.rename(e)}delete(){return this.concreteDirectory.delete()}search(e){return this.concreteDirectory.search(e)}addFile(e,t,n){return this.concreteDirectory.addFile(e,t,n)}addDirectory(e){return this.concreteDirectory.addDirectory(e)}getChildren(){return this.concreteDirectory.getChildren()}}t.ProxyDirectory=a;class l extends s{write(e){const t=Object.create(null,{write:{get:()=>super.write}});return r(this,void 0,void 0,function*(){let n=yield t.write.call(this,e);return this.onChange(),n})}rename(e){const t=Object.create(null,{rename:{get:()=>super.rename}});return r(this,void 0,void 0,function*(){let n=yield t.rename.call(this,e);return this.onChange(),n})}delete(){const e=Object.create(null,{delete:{get:()=>super.delete}});return r(this,void 0,void 0,function*(){yield e.delete.call(this),this.onChange()})}}t.ChangeEventProxyFile=l;class h extends a{rename(e){const t=Object.create(null,{rename:{get:()=>super.rename}});return r(this,void 0,void 0,function*(){let n=yield t.rename.call(this,e);return this.onChange(),n})}delete(){const e=Object.create(null,{delete:{get:()=>super.delete}});return r(this,void 0,void 0,function*(){yield e.delete.call(this),this.onChange()})}addFile(e,t,n){const i=Object.create(null,{addFile:{get:()=>super.addFile}});return r(this,void 0,void 0,function*(){let r=i.addFile.call(this,e,t,n);return this.onChange(),r})}addDirectory(e){const t=Object.create(null,{addDirectory:{get:()=>super.addDirectory}});return r(this,void 0,void 0,function*(){let n=t.addDirectory.call(this,e);return this.onChange(),n})}getChildren(){const e=Object.create(null,{getChildren:{get:()=>super.getChildren}});return r(this,void 0,void 0,function*(){let t=[];for(let n of yield e.getChildren.call(this))(n=n instanceof o.Directory?new h(n):new l(n)).addOnChangeListener(()=>{this.onChange()}),t.push(n);return t})}}t.ChangeEventProxyDirectory=h;class c extends h{constructor(e,t){super(e),this.cachedChildren=null,this.parent=t||null}get root(){return null===this.parent?this:this.parent.root}get path(){return null===this.parent?[this]:this.parent.path.concat([this])}getChildren(){const e=Object.create(null,{getChildren:{get:()=>super.getChildren}});return r(this,void 0,void 0,function*(){if(null===this.cachedChildren){let t=[];for(let n of yield e.getChildren.call(this))n instanceof o.Directory&&(n=new c(n,this)),t.push(n);this.cachedChildren=t}return this.cachedChildren.slice()})}clearCache(){this.cachedChildren=null}}t.CachedProxyDirectory=c},function(e,t,n){"use strict";n.r(t);var r=n(3),i=n(2),o=n(5);function s(e){class t extends e{constructor(...e){super(...e),this.dragOverActions=[],this.dragOverDelay=2e3,this.timeOuts=[],this.counterSet=new Set,new MutationObserver(e=>{for(let t of e)t.removedNodes.length>0&&this.handleChildrenRemoved(t.removedNodes)}).observe(this,{childList:!0,subtree:!0}),this.addEventListener("dragover",this.handleDragOver.bind(this)),this.addEventListener("dragenter",this.handleDragEnter.bind(this)),this.addEventListener("dragleave",this.handleDragLeave.bind(this)),this.addEventListener("drop",this.handleDrop.bind(this))}get isOver(){return this.classList.contains(t.dragOverClass)}addDragoverAction(e){this.dragOverActions.push(e)}handleDragOver(e){e.preventDefault()}handleDragEnter(e){e.preventDefault(),0===this.counterSet.size&&(this.classList.add(t.dragOverClass),this.setTimeouts()),null!==e.target&&this.counterSet.add(e.target)}handleDragLeave(e){e.preventDefault(),null!==e.target&&this.counterSet.delete(e.target),0===this.counterSet.size&&(this.classList.remove(t.dragOverClass),this.clearTimeOuts())}handleDrop(e){e.preventDefault(),this.counterSet=new Set,this.classList.remove(t.dragOverClass),this.clearTimeOuts()}handleChildrenRemoved(e){for(let t of e)this.counterSet.delete(t),this.handleChildrenRemoved(t.childNodes)}setTimeouts(){if(this.dragOverActions.length>0){for(let e of this.dragOverActions){let t=window.setTimeout(()=>{e()},this.dragOverDelay);this.timeOuts.push(t)}this.classList.add(t.pendingActionClass)}}clearTimeOuts(){this.classList.remove(t.pendingActionClass);for(let e of this.timeOuts)window.clearTimeout(e);this.timeOuts=[]}}return t.dragOverClass="dragover",t.pendingActionClass="pending-action",t}n.d(t,"Header",function(){return c}),n.d(t,"Row",function(){return u}),n.d(t,"Data",function(){return d}),n.d(t,"Table",function(){return A});customElements.define("table-body",class extends o.b{get template(){return"\n      <slot></slot>\n    "}get parentHeightDifference(){return null===this.parentElement?0:this.parentElement.getBoundingClientRect().height-this.getBoundingClientRect().height}get position(){return super.position}set position(e){e.x=0,e.y=Math.min(0,Math.max(this.parentHeightDifference,e.y||0)),super.position=e}});class a extends i.CustomElement{constructor(){super(),this.view=document.createElement("div"),this.pane=document.createElement("table-body");let e=document.createElement("slot");this.pane.appendChild(e),this.view.appendChild(this.pane)}updateAttributes(e){}render(e){super.render(e),this.view.style.position="relative",this.view.style.overflowY="hidden",this.view.style.height="inherit",this.view.style.width="100%",this.pane.style.width="100%",e.appendChild(this.view)}resetPane(){this.pane.position={x:0,y:0},this.pane.velocity={x:0,y:0}}}class l extends i.CustomElement{get table(){let e=this.parentElement;for(;e;){if(e instanceof A)return e;e=e.parentElement}return null}updateAttributes(e){}}class h extends l{constructor(){super()}get css(){return"\n        :host {\n            display: flex;\n            width: 100%;\n            height: var(--table-row-height, 30px);\n            line-height: var(--table-row-height, 30px);\n        }\n     "}get template(){return"\n      <slot></slot>\n    "}get hidden(){return this.classList.contains(h.hiddenClass)}set hidden(e){e?this.classList.add(h.hiddenClass):this.classList.remove(h.hiddenClass)}get allColumns(){return Array.from(this.children).filter(e=>e instanceof d)}getColumn(e){return this.allColumns[e]||null}}h.hiddenClass="hidden";class c extends h{constructor(){super(),this.onclick=(e=>{let t=e.target;if(t instanceof d){let e=this.table,n=t.column;null!==e&&null!==n&&e.sortColumn(n)}})}get css(){return super.css+`\n        :host {\n            color: var(--table-header-text-color, white);\n            background: var(--table-header-color, #5c6873);\n            text-transform: uppercase;\n        }\n        \n        :host > * {\n          cursor: pointer;\n        }\n        \n        a {\n            text-decoration: none;\n            color: var(--table-header-text-color, white);\n            font-weight: bold;\n        }\n      \n        ::slotted(*)::after {\n            float: right;\n            margin-right: 10px;\n        }\n\n        ::slotted(.${d.ascendingSortClass})::after {\n           content: "\\25BC";\n        }\n\n        ::slotted(.${d.descendingSortClass})::after {\n            content: "\\25B2";\n        }\n     `}connectedCallback(){super.connectedCallback(),this.setAttribute("slot",A.HEADER_SLOT_NAME)}}class u extends(function(e){return class extends e{constructor(...e){super(...e),this.addEventListener("dragstart",this.handleDragStart.bind(this)),this.addEventListener("dragend",this.handleDragEnd.bind(this))}static get draggingClass(){return"dragging"}connectedCallback(){super.connectedCallback(),this.draggable=!0}handleDragStart(e){this.classList.add(this.constructor.draggingClass)}handleDragEnd(e){this.classList.remove(this.constructor.draggingClass)}}}(s(h))){constructor(){super(),this.selected=!1,this.hidden=!1,this.onclick=(e=>{let t=this.table;if(null!==t){let n,r;e.shiftKey?(n=!0,r=!0):e.ctrlKey||e.metaKey?(n=!1,r=!0):(n=!1,r=!1),t.toggleRowSelection(this,r,n)}})}get css(){return super.css+`\n        :host(:hover) {\n            background: var(--table-focus-item-color, #c0d5e8);\n            cursor: pointer;\n        }\n        \n        :host(.${u.SELECTED_CLASS}){\n          background-color: var(--table-selected-item-color, #5d91e5);\n          color: #fff;\n        }\n        \n        :host(.dragover) {\n            background: var(--table-focus-item-color, #c0d5e8);\n        }\n        \n        a.button {\n          -webkit-appearance: button;\n          -moz-appearance: button;\n          appearance: button;\n        \n          text-decoration: none;\n          color: initial;\n        }\n    `}get selected(){return this.classList.contains(u.SELECTED_CLASS)}get data(){let e=[];for(let t of this.allColumns)e.push(t.data);return e}set selected(e){e?(this.classList.add(u.SELECTED_CLASS),this.dispatchEvent(new Event("selected"))):(this.classList.remove(u.SELECTED_CLASS),this.dispatchEvent(new Event("deselected")))}toggleSelected(){this.selected=!this.selected}handleDragStart(e){super.handleDragStart(e),e.dataTransfer&&(e.dataTransfer.setData(u.DATA_TRANSFER_TYPE,JSON.stringify(this.data)),e.dataTransfer.dropEffect="move")}compare(e,t){let n=this.getColumn(t),r=e.getColumn(t);return null===n||null===r?0:n.compare(r)}}u.DATA_TRANSFER_TYPE="text/table-rows",u.SELECTED_CLASS="selected";class d extends l{constructor(){super()}static get observedAttributes(){return[d.widthAttribute]}get css(){return"\n        :host {\n            flex: 1;\n            padding: 0;\n            text-align: start;\n            font-size: calc(4px + .75vw);\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n        }\n    "}get template(){return"\n      <slot></slot>\n    "}get data(){return this.innerText}set data(e){this.innerText=e.toString()}get width(){let e=this.getAttribute(d.widthAttribute);return null===e?null:Number.parseInt(e)}set width(e){null===e?this.removeAttribute(d.widthAttribute):this.setAttribute(d.widthAttribute,e.toString())}get column(){let e=this.parentElement;return e instanceof h?e.allColumns.indexOf(this):null}get sortOrder(){return this.classList.contains(d.ascendingSortClass)?1:this.classList.contains(d.descendingSortClass)?-1:0}set sortOrder(e){switch(e){case-1:this.classList.remove(d.ascendingSortClass),this.classList.add(d.descendingSortClass);break;case 0:this.classList.remove(d.descendingSortClass),this.classList.remove(d.ascendingSortClass);break;case 1:this.classList.remove(d.descendingSortClass),this.classList.add(d.ascendingSortClass)}}updateAttributes(e){let t=e[d.widthAttribute];if(null===t)this.style.flex=null;else{let e=Number.parseInt(t);isNaN(e)||(this.style.flex=e.toString())}}compare(e){return this.data.localeCompare(e.data)}}d.ascendingSortClass="asc",d.descendingSortClass="des",d.widthAttribute="width";class A extends(s(a)){constructor(){super(),this.sortOrder=[],this.columnsDialog=new r.Dialog,this.columnsDialog.name="Columns",this.onclick=(e=>{let t=e.target;if(t instanceof u&&!this.selectMultiple)for(let e of this.selectedRows)e!==t&&(e.selected=!1)}),this.oncontextmenu=(e=>{let t=this.flatChildren(r.Dialog);if(t.length>0){e.preventDefault();for(let n of t)n.position={x:e.pageX,y:e.pageY},n.velocity={x:0,y:0},n.visible=!0}})}static get observedAttributes(){return[A.selectMultipleAttribute]}get template(){return null}get css(){return`      \n        :host {          \n            position: relative;\n            padding: 0;\n            width: 100%;\n            height: 400px;\n            background-color: var(--table-background-color, white);\n            border-spacing: 0;\n            box-shadow: none;\n            color: var(--table-body-text-color, black);\n        }\n        \n        :host(:not(.${A.showHiddenClass})) ::slotted(.hidden) {\n            display: none;\n        }\n        \n        a {\n            text-decoration: none;\n            color: var(--table-selected-item-color, #5d91e5);\n            font-weight: bold;\n        }\n        \n        .${A.headerContainerClass} {\n            width: 100%;\n        }\n     `}get selectedData(){let e=new Set;for(let t of this.selectedRows)e.add(t.data);return e}get selectedRows(){return Array.from(this.querySelectorAll(`.${u.SELECTED_CLASS}`))}set selectedRows(e){let t=new Set(this.selectedRows),n=new Set(e),r=[...n].filter(e=>!t.has(e)),i=[...t].filter(e=>!n.has(e));for(let e of i)e.selected=!1;for(let e of r)e.selected=!0;let o=new Event(A.EVENT_SELECTION_CHANGED);this.dispatchEvent(o)}get rows(){return this.flatChildren(u)}set rows(e){this.removeChildren(u),this.appendChildren(e),this.resetPane()}get showHidden(){return this.classList.contains(A.showHiddenClass)}get visibleColumnsDialog(){return this.columnsDialog}get selectMultiple(){return null!==this.getAttribute(A.selectMultipleAttribute)}set selectMultiple(e){e?this.setAttribute(A.selectMultipleAttribute,""):this.removeAttribute(A.selectMultipleAttribute)}set showHidden(e){e?this.classList.add(A.showHiddenClass):this.classList.remove(A.showHiddenClass)}get mainHeader(){return this.querySelector("table-header")}get sortMap(){return this.sortOrder.reduce((e,t)=>(e[t.columnNumber]=t.sortOrder,e),{})}updateAttributes(e){for(let e of this.rows)e.selected=!1}render(e){let t=document.createElement("div");t.className=A.headerContainerClass;let n=document.createElement("slot");n.name=A.HEADER_SLOT_NAME,t.appendChild(n),e.appendChild(t),super.render(e)}sortColumn(e){let t=this.sortMap[e]||0;if(this.sortOrder=this.sortOrder.filter(t=>t.columnNumber!==e),null!==t){switch(t){case-1:t=0;break;case 0:t=1;break;case 1:t=-1}0!==t&&this.sortOrder.unshift({columnNumber:e,sortOrder:t})}this.sort(),this.updateColumnSortOrders()}updateColumnSortOrders(){let e=this.sortMap;for(let t of this.flatChildren(h)){let n=t.allColumns;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];r.sortOrder=void 0===i?0:i}}}sort(){let e=this.rows;e=e.sort((e,t)=>{for(let n of this.sortOrder){let r=n.sortOrder*e.compare(t,n.columnNumber);if(0!==r)return r}return 0}),this.rows=e}toggleRowSelection(e,t,n){this.selectMultiple||(t=!1,n=!1);let r,i=new Set(this.selectedRows);if(r=t?new Set(i):new Set,!n&&i.has(e)?r.delete(e):null!==e&&r.add(e),t&&n&&i.size>0){let t=this.rows,n=t.indexOf(e),o=t.indexOf(e);for(let e of i){let r=t.indexOf(e);Math.abs(r-o)<Math.abs(n-o)&&(n=r)}let s=Math.min(n,o)+1,a=Math.max(n,o),l=t.slice(s,a);for(let e of l)!this.showHidden&&e.hidden||r.add(e)}this.selectedRows=Array.from(r)}}A.HEADER_SLOT_NAME="header",A.headerContainerClass="header",A.showHiddenClass="show-hidden",A.selectMultipleAttribute="select-multiple",A.EVENT_SELECTION_CHANGED="selectionchanged",customElements.define("table-header",c),customElements.define("table-row",u),customElements.define("table-data",d),customElements.define("selectable-table",A)},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=n(8),s=n(24),a=n(25),l=i(n(0)),h=[new o.ConsoleFile,new s.NullFile];t.DeviceDirectory=class extends l.Directory{constructor(){super(),this.created=new Date,this.lastModified=new Date,this.extra={},this.extraChildren=[],this.extraChildren=[new a.DomElementDevice(document.body)]}get name(){return"dev"}get id(){return"dev"}get icon(){return null}getChildren(){return r(this,void 0,void 0,function*(){return h.slice().concat(this.extraChildren)})}addDirectory(e){return r(this,void 0,void 0,function*(){throw new Error("can't add directory to device directory")})}addFile(e,t,n){return r(this,void 0,void 0,function*(){throw new Error("can't add file to device directory")})}delete(){return r(this,void 0,void 0,function*(){throw new Error("can't delete device directory")})}rename(e){return r(this,void 0,void 0,function*(){throw new Error("can't rename device directory")})}search(e){return r(this,void 0,void 0,function*(){return[]})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=n(13),s=i(n(0));class a extends o.ProxyDirectory{constructor(e,t){super(e),this.mounts=t}getChildren(){const e=Object.create(null,{getChildren:{get:()=>super.getChildren}});return r(this,void 0,void 0,function*(){let t=yield e.getChildren.call(this),n=[];for(let e of t){let t=this.mounts[e.id];void 0!==t?n.push(new l(t,e.name)):e instanceof s.Directory?n.push(new a(e,this.mounts)):n.push(e)}return n})}addDirectory(e){const t=Object.create(null,{addDirectory:{get:()=>super.addDirectory}});return r(this,void 0,void 0,function*(){let n=yield t.addDirectory.call(this,e);return new a(n,this.mounts)})}mount(e){this.mounts[this.id]=e}}class l extends a{constructor(e,t){super(e,{}),this.mountPointName=t}get name(){return this.mountPointName}}t.VirtualFS=class extends l{constructor(e){super(e,e.name)}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(0)),s=n(1),a=30;function l(e,t,n,i){return r(this,void 0,void 0,function*(){return console.log("URL",e,n),yield new Promise((r,o)=>{n=n||null,t=t||{},"GET"!==(i=i||"GET")&&"DELETE"!==i||(e+=function(e){let t=[];for(let n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return"?"+t.join("&")}(t));let l=new XMLHttpRequest;if(l.responseType="arraybuffer",l.onreadystatechange=(()=>{if(l.readyState===XMLHttpRequest.DONE)if(0===l.status)o("An error has occurred");else{let e=l.getResponseHeader("content-type");if(l.status>=200&&l.status<400)r(l.response);else{let t=s.parseTextArrayBuffer(l.response),n=`${l.status} response`;if("application/json"===e)try{let e=JSON.parse(t);for(let t in e)n+=`: ${t} - ${e[t]}. `;o(new Error(n))}catch(e){o("Error parsing response.")}else"text/html"===e?o(new Error(n)):(n+=t,o(new Error(n)))}}}),l.open(i,e,!0),l.timeout=1e3*a,!function(e){let t=document.createElement("a");return t.href=e,window.location.protocol+"//"+window.location.host!=t.protocol+"//"+t.host}(e)){l.withCredentials=!0;let e=function(e){let t=document.cookie.split(`${e}=`);return t.length>1&&(t=t[1].split(";"))[0]||null}("csrftoken");null!==e&&l.setRequestHeader("X-CSRFToken",e)}l.send(n)})})}class h extends o.BasicFile{constructor(e,t){super(),this.extra={},this.parent=e,this.fileData=t}get id(){return this.fileData.id}get name(){return this.fileData.name}get mimeType(){return this.fileData.mimeType}get lastModified(){return new Date(this.fileData.lastModified)}get created(){return new Date(this.fileData.created)}get url(){return this.fileData.url}get icon(){return this.fileData.icon}get size(){return this.fileData.size}read(){return l(this.url,{},null,"GET")}write(e){return r(this,void 0,void 0,function*(){return yield l(this.url,{},new Blob([e],{type:this.mimeType}),"POST")})}rename(e){return r(this,void 0,void 0,function*(){let t=new FormData;t.append("id",this.id),t.append("to",e);let n=yield this.parent.getFile([c.renameFileName]);yield n.write(t)})}delete(){return r(this,void 0,void 0,function*(){let e=yield this.parent.getFile([c.deleteFileName]);yield e.write(s.stringToArrayBuffer(this.id))})}}class c extends o.Directory{constructor(e,t){super(),this.extra={},this.parent=e,this.fileData=t}get id(){return this.fileData.id}get name(){return this.fileData.name}get lastModified(){return new Date(this.fileData.lastModified)}get created(){return new Date(this.fileData.created)}get url(){return"http://localhost:8000"+this.fileData.url}get icon(){return this.fileData.icon}get size(){return this.fileData.size}read(){return l(this.url,{},null,"GET")}rename(e){return r(this,void 0,void 0,function*(){let t=new FormData;if(t.append("id",this.id),t.append("to",e),null==this.parent)throw new Error("cannot rename root directory");let n=yield this.parent.getFile([c.renameFileName]);yield n.write(t)})}delete(){return r(this,void 0,void 0,function*(){if(null==this.parent)throw new Error("cannot delete root directory");let e=yield this.parent.getFile([c.deleteFileName]);yield e.write(s.stringToArrayBuffer(this.id))})}search(e){return r(this,void 0,void 0,function*(){console.log("SEARCH",e);let t=yield this.getFile([c.searchFileName]),n=yield t.write(s.stringToArrayBuffer(e)),r=s.parseJsonArrayBuffer(n);if(r instanceof Array){let e=[];console.log("MAP",r);for(let t of r)t.file.directory?e.push({path:t.path,file:new c(this,t.file)}):e.push({path:t.path,file:new h(this,t.file)});return e}throw new Error("search returned wrong data type")})}addFile(e,t,n){return r(this,void 0,void 0,function*(){let r=new FormData;r.append("file",new Blob([e],{type:n})),t&&r.append("name",t);let i=yield this.getFile([c.addFileName]),o=yield i.write(r);return new h(this,s.parseJsonArrayBuffer(o))})}addDirectory(e){return r(this,void 0,void 0,function*(){let t=yield this.getFile([c.addDirectoryName]),n=yield t.write(s.stringToArrayBuffer(e));return new c(this,s.parseJsonArrayBuffer(n))})}getChildren(){return r(this,void 0,void 0,function*(){let e=yield this.read(),t=s.parseJsonArrayBuffer(e);console.log("DATA",t);let n=[];for(let e in t)if(t.hasOwnProperty(e)){let r=t[e];r.name=e,r.directory?n.push(new c(this,r)):n.push(new h(this,r))}return n})}}c.addDirectoryName=".mkdir",c.addFileName=".add",c.renameFileName=".rename",c.deleteFileName=".delete",c.moveFileName=".move",c.searchFileName=".search";t.RemoteFS=class extends c{constructor(e){super(null,{id:e,name:"root",directory:!0,mimeType:o.Directory.mimeType,lastModified:(new Date).toISOString(),created:(new Date).toISOString(),url:e,icon:null,size:0})}}},function(e,t,n){"use strict";n.r(t),n.d(t,"createFS",function(){return s});var r=n(4),i=(n(7),n(1),n(6),n(15),n(9),n(16)),o=n(17);async function s(){let e=new i.VirtualFS(new r.MemoryDirectory(null,"root"));return(await e.addDirectory("Files")).mount(new o.RemoteFS("/files/mediafiles/directory/")),e}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(21),i=n(22),o=n(23);function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return h(this,e,t,n)}function h(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|A(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t){if(c(t),e=a(e,t<0?0:0|A(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|A(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function A(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,s=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,n/=2}function h(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var c=-1;for(o=n;o<a;o++)if(h(e,o)===h(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*s}else-1!==c&&(o-=o-c),c=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var u=!0,d=0;d<l;d++)if(h(e,o+d)!==h(t,d)){u=!1;break}if(u)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function C(e,t,n,r){return H(N(t,e.length-n),e,n,r)}function v(e,t,n,r){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return v(e,t,n,r)}function w(e,t,n,r){return H(K(t),e,n,r)}function b(e,t,n,r){return H(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function D(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,l,h=e[i],c=null,u=h>239?4:h>223?3:h>191?2:1;if(i+u<=n)switch(u){case 1:h<128&&(c=h);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&h)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&(l=(15&h)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,u=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=u}return function(e){var t=e.length;if(t<=B)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=B));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return h(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return u(null,e)},l.allocUnsafeSlow=function(e){return u(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?D(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return D(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),h=this.slice(r,i),c=e.slice(t,n),u=0;u<a;++u)if(h[u]!==c[u]){o=h[u],s=c[u];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return C(this,e,t,n);case"ascii":return v(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var B=4096;function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=J(e[o]);return i}function M(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function F(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,r,o){return o||L(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function Q(e,t,n,r,o){return o||L(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||k(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||k(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);k(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);k(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return Q(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return Q(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=l.isBuffer(e)?e:N(new l(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function J(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function K(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(20))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=h(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=h(e),r=n[0],s=n[1],a=new o(function(e,t,n){return 3*(t+n)/4-n}(0,r,s)),l=0,c=s>0?r-4:r,u=0;u<c;u+=4)t=i[e.charCodeAt(u)]<<18|i[e.charCodeAt(u+1)]<<12|i[e.charCodeAt(u+2)]<<6|i[e.charCodeAt(u+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=255&t;2===s&&(t=i[e.charCodeAt(u)]<<2|i[e.charCodeAt(u+1)]>>4,a[l++]=255&t);1===s&&(t=i[e.charCodeAt(u)]<<10|i[e.charCodeAt(u+1)]<<4|i[e.charCodeAt(u+2)]>>2,a[l++]=t>>8&255,a[l++]=255&t);return a},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(c(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function h(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,h=l>>1,c=-7,u=n?i-1:0,d=n?-1:1,A=e[t+u];for(u+=d,o=A&(1<<-c)-1,A>>=-c,c+=a;c>0;o=256*o+e[t+u],u+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+e[t+u],u+=d,c-=8);if(0===o)o=1-h;else{if(o===l)return s?NaN:1/0*(A?-1:1);s+=Math.pow(2,r),o-=h}return(A?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,l,h=8*o-i-1,c=(1<<h)-1,u=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,A=r?0:o-1,f=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),(t+=s+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=c?(a=0,s=c):s+u>=1?(a=(t*l-1)*Math.pow(2,i),s+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,i),s=0));i>=8;e[n+A]=255&a,A+=f,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;e[n+A]=255&s,A+=f,s/=256,h-=8);e[n+A-f]|=128*p}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(0);t.NullFile=class extends i.BasicFile{constructor(){super(),this.created=new Date,this.lastModified=new Date,this.extra={}}get id(){return"null"}get name(){return"null"}get icon(){return null}get url(){return null}get mimeType(){return"text/plain"}get size(){return 0}read(){return r(this,void 0,void 0,function*(){return new ArrayBuffer(0)})}write(e){return r(this,void 0,void 0,function*(){return e})}delete(){return r(this,void 0,void 0,function*(){})}rename(e){return r(this,void 0,void 0,function*(){throw new Error("can't rename null file")})}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(0)),s=n(1);class a extends o.BasicFile{constructor(e){super(),this.created=new Date,this.extra={},this.lastModified=new Date,this.element=e}get id(){return`${this.name}-${this.element.id}`}get icon(){return null}get url(){return null}delete(){return r(this,void 0,void 0,function*(){throw new Error("can't delete element file")})}rename(e){return r(this,void 0,void 0,function*(){throw new Error("can't rename element file")})}}t.AbstractElementFile=a;class l extends a{constructor(e){super(e),this.readBuffer=[],this.element.addEventListener(this.getEventName(),e=>{for(;this.readBuffer.length>0;){let t=this.readBuffer.shift();void 0!==t&&t(e)}this.lastModified=new Date},!1)}get size(){return 0}getEventData(e){throw new Error("getEventData not implemented.")}read(){return new Promise((e,t)=>{this.readBuffer.push(t=>{e(this.getEventData(t))})})}}class h extends l{get name(){return"keyboard"}get mimeType(){return"text/plain"}getEventName(){return"keydown"}getEventData(e){return s.stringToArrayBuffer(e.char)}write(e){return r(this,void 0,void 0,function*(){let t=s.parseTextArrayBuffer(e);for(let e of t){let t=new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:e,char:e,shiftKey:!1}),n=new KeyboardEvent("keyup",{bubbles:!0,cancelable:!0,key:e,char:e,shiftKey:!1});this.element.dispatchEvent(t),this.element.dispatchEvent(n)}return e})}}class c extends l{get name(){return"mouse"}get mimeType(){return"application/json"}getEventName(){return"click"}getEventData(e){let t={clientX:e.clientX||null,clientY:e.clientY||null,offsetX:e.offsetX||null,offsetY:e.offsetY||null,pageX:e.pageX||null,pageY:e.pageY||null};return s.stringToArrayBuffer(JSON.stringify(t))}write(e){return r(this,void 0,void 0,function*(){return e})}}class u extends a{constructor(e){super(e)}get name(){return"text"}get size(){return s.stringToArrayBuffer(this.element.innerText).byteLength}get mimeType(){return"text/plain"}get url(){return`data:,${encodeURIComponent(this.element.innerText)},`}read(){return r(this,void 0,void 0,function*(){return s.stringToArrayBuffer(this.element.innerText)})}write(e){return r(this,void 0,void 0,function*(){return this.element.innerText=s.parseTextArrayBuffer(e),e})}}class d extends a{constructor(e){super(e)}get name(){return"class"}get size(){return s.stringToArrayBuffer(this.element.className).byteLength}get mimeType(){return"text/plain"}get url(){return`data:,${encodeURIComponent(this.element.className)},`}read(){return r(this,void 0,void 0,function*(){return s.stringToArrayBuffer(this.element.className)})}write(e){return r(this,void 0,void 0,function*(){return this.element.className=s.parseTextArrayBuffer(e),e})}}class A extends o.Directory{constructor(e){super(),this.created=new Date,this.lastModified=new Date,this.extra={},""===e.id&&(e.id=`${Math.random().toString(36).substr(2,9)}`),this.element=e,this.keyboard=new h(e),this.mouse=new c(e),this.text=new u(e),this.class=new d(e)}get id(){return this.element.id}get name(){return`${this.element.tagName.toLowerCase()}-${this.id}`}get size(){return 0}get icon(){return null}addFile(e,t,n){return r(this,void 0,void 0,function*(){throw new Error("can't add file to element")})}addDirectory(e){return r(this,void 0,void 0,function*(){let t=document.createElement(e);return this.element.appendChild(t),new A(t)})}getChildren(){return r(this,void 0,void 0,function*(){let e=[this.keyboard,this.mouse,this.text,this.class];for(let t of this.element.children)t instanceof HTMLElement&&e.push(new A(t));return e})}delete(){return r(this,void 0,void 0,function*(){null!==this.element.parentElement&&this.element.parentElement.removeChild(this.element)})}rename(e){return r(this,void 0,void 0,function*(){throw new Error("can't rename element")})}search(e){return r(this,void 0,void 0,function*(){return[]})}}t.DomElementDevice=A},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),i=n(3);class o extends r.CustomElement{constructor(){super(...arguments),this.delay=null}static get observedAttributes(){return["delay"]}get css(){return super.css+`\n      :host {\n        --height: var(--message-height, 24px);\n        --delete-button: url(${i.Dialog.DETETE_BUTTON_URL});\n\n        display: inline-block;\n        box-sizing: border-box;\n        position: relative;\n        width: 75%;\n        height: var(--height);\n        line-height: var(--height);\n        padding-left: 5px;\n        border-bottom: 2px solid var(--success-color, #90ee90);\n        overflow: hidden;\n      }\n      \n      :host([error]){\n        border-bottom: 2px solid var(--error-color, lightcoral);\n      }\n\n      div {\n        float: right;\n        width: var(--height);\n        height: var(--height);\n        background-image: var(--delete-button);\n        background-size: calc(.75 * var(--height));\n        background-repeat: no-repeat;\n        background-position: center;\n        cursor: pointer;\n      }\n    `}get message(){return this.innerText}set message(e){this.innerText=e}render(e){super.render(e);let t=document.createElement("slot");e.appendChild(t);let n=document.createElement("div");n.onclick=(e=>{e.preventDefault(),this.remove()}),e.appendChild(n)}updateAttributes(e){null!==e.delay?this.delay=Number.parseInt(e.delay):this.delay=null}connectedCallback(){super.connectedCallback(),null!==this.delay&&window.setTimeout(()=>{this.remove()},this.delay)}}o.className="error",t.Message=o,customElements.define("user-message",o)},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(3),o=n(0),s=n(1),a=n(9);class l extends i.Dialog{constructor(){super(),this.addEventListener(i.Dialog.EVENT_OPENED,e=>{this.parentElement instanceof a.FileBrowser&&(this.removeChildren(),this.appendChildren(this.getItems(this.parentElement)))})}get css(){return super.css+"\n      ::slotted(*){\n          margin: 5px;\n          cursor: pointer;\n      }\n    "}getItems(e){let t=[],n=e.selectedFileRows,r=e.selectedFiles;if(n.length>0){if(1===n.length){const r=n[0],i=r.file,o=r.path;null!==i&&(t.push(this.createOpenButton(e,r)),i.url&&t.push(this.createCopyButton()),t.push(this.createRenameButton(e,i)),"application/javascript"!==i.mimeType&&"text/javascript"!==i.mimeType||null!==o&&t.push(this.createRunButton(e,o)))}t.push(this.createDeleteButton(e,r)),t.push(this.createMoveButton(e,r))}return t.push(this.createAddFileButton(e)),t.push(this.createAddDirectoryButton(e)),t.push(this.createShowHiddenButton(e)),t.push(this.createVisibleColumnsButton(e)),t}createOpenButton(e,t){let n=document.createElement("div");return n.innerText="Open",n.onclick=(()=>{e.onFileRowDoubleClick(t),this.visible=!1}),n}createCopyButton(){let e=document.createElement("div");return e.innerText="Copy Url",e.onclick=(()=>{document.execCommand("copy")}),e}createRenameButton(e,t){let n=document.createElement("div");return n.innerText="Rename",n.onclick=(()=>{e.logAndLoadWrapper((()=>r(this,void 0,void 0,function*(){let e=prompt("New Name");null!==e&&(this.visible=!1,yield t.rename(e))}))())}),n}createRunButton(e,t){let n=document.createElement("div");return n.innerText="Run",n.onclick=(()=>{e.execute(t)}),n}createDeleteButton(e,t){let n=document.createElement("div");return n.innerText="Delete",n.onclick=(n=>{n.preventDefault(),n.stopPropagation();let r=document.createElement("confirm-dialog");this.appendChild(r),r.addEventListener(i.Dialog.EVENT_CLOSED,()=>{r.remove()});let o=document.createElement("div"),s=[];for(let e of t)s.push(e.name);o.innerText=`Are you sure you want to remove ${s.join(", ")}?`;let a=[];r.addEventListener(i.ConfirmDialog.EVENT_CONFIRMED,()=>{for(let e of t)a.push(e.delete());this.visible=!1,e.logAndLoadWrapper(Promise.all(a).then(()=>{}))}),r.appendChild(o),r.visible=!0}),n}createMoveButton(e,t){let n=document.createElement("div");return n.innerText="Move",n.onclick=(n=>{n.preventDefault(),n.stopPropagation();let r=document.createElement("file-browser");r.rootDirectory=e.rootDirectory;let s=document.createElement("confirm-dialog");r.selectMultiple=!1,s.name="Move Files",s.confirmationText="Select",s.addEventListener(i.ConfirmDialog.EVENT_CONFIRMED,()=>{let n,i=r.selectedFiles,s=i[0];n=1===i.length&&s instanceof o.Directory?s:r.currentDirectory;let a=[];for(let e of t)a.push(e.move(n));e.logAndLoadWrapper(Promise.all(a).then(()=>{}))}),this.appendChild(s),s.addEventListener(i.Dialog.EVENT_CLOSED,()=>{s.remove()}),s.visible=!0}),n}createAddFileButton(e){let t=document.createElement("div");return t.innerText="Add File",t.onclick=(t=>{t.preventDefault(),t.stopPropagation();let n=document.createElement("confirm-dialog");n.name="Add File",n.confirmationText="Add";let r=document.createElement("div"),o=document.createElement("span");o.innerText="File";let a=document.createElement("input");a.type="file",r.appendChild(o),r.appendChild(a),n.addEventListener(i.ConfirmDialog.EVENT_CONFIRMED,()=>{let t=[];if(null!==a.files)for(let n of a.files)t.push(s.fileToArrayBuffer(n).then(t=>e.currentDirectory.addFile(t,n.name,n.type)));this.visible=!1,e.logAndLoadWrapper(Promise.all(t).then(()=>{}))}),n.appendChild(r),this.appendChild(n),n.visible=!0}),t}createAddDirectoryButton(e){let t=document.createElement("div");return t.innerText="Add Directory",t.onclick=(()=>{let t=prompt("Directory Name");null!==t&&e.logAndLoadWrapper(e.currentDirectory.addDirectory(t).then(()=>{})),this.visible=!1}),t}createShowHiddenButton(e){let t=document.createElement("div"),n=document.createElement("span"),r=document.createElement("input");return r.type="checkbox",r.checked=e.showHidden,n.innerText="Show Hidden",r.onchange=(()=>{e.showHidden=r.checked}),t.appendChild(n),t.appendChild(r),t}createVisibleColumnsButton(e){let t=document.createElement("div");return t.innerText="Visible Columns",t.onclick=(t=>{t.preventDefault(),e.visibleColumnsDialog.visible=!0}),t}}t.ContextMenu=l,customElements.define("file-browser-context-menu",l)},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);function o(e){let t={};try{let n=i.parseTextArrayBuffer(e).split("\n");for(let e of n){let n=e.split("=");2===n.length&&(t[n[0].trim()]=n[1].trim())}}catch(e){console.log(`Error parsing config file: ${e}`)}return t}t.parseConfigFile=o,t.updateConfigFile=function(e,t){return r(this,void 0,void 0,function*(){let n;n=void 0!==t?o(t):{},Object.assign(n,e);let r="";for(let e in n)n.hasOwnProperty(e)&&(r+=`${e}=${n[e]}\n`);return i.stringToArrayBuffer(r)})}}]);
//# sourceMappingURL=bundle.1.3.2.js.map